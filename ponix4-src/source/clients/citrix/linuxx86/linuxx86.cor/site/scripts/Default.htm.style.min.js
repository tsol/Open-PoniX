(function(e){var f={},h,g={en:{}},d={en:{}};d["default"]=d.en;g["default"]=g.en=e.extend(true,{},g.en,{name:"en",englishName:"English",nativeName:"English",stringBundle:"scripts/en/ctxs.wrstrings.js",customStringBundle:"contrib/custom.wrstrings.en.js"});f.lookupCulture=function(j){var u;if(!j){return h||g["default"]}if(b(j)){j=j.split(",")}if(c(j)){var n,q=j,o,k=q.length,r=[];for(o=0;o<k;o++){var t=e.trim(q[o]).toLowerCase();var s,m=t.split(";");n=e.trim(m[0]);if(m.length===1){s=1}else{t=e.trim(m[1]);if(t.indexOf("q=")===0){t=t.substr(2);s=parseFloat(t,10);s=isNaN(s)?0:s}else{s=1}}r.push({language:n,priority:s})}r.sort(function(l,i){return l.priority<i.priority?1:-1});for(o=0;o<k;o++){n=r[o].language;u=g[n];if(u){return u}do{var p=n.lastIndexOf("-");if(p===-1){break}n=n.substr(0,p);u=g[n];if(u){return u}}while(1)}}else{if(typeof j==="object"){return j}}return u||g["default"]};f.defaultCulture=function(i){if(i){if(!b(i)){i=i.name}if(b(i)){i=i.toLowerCase();if(g[i]){g["default"]=g[i];if(!d[g["default"].name]){d[g["default"].name]={}}d["default"]=d[g["default"].name]}}}return g["default"]};f.currentCulture=function(){return h||g["default"]};f.preferCulture=function(i){return h=(!i)?g["default"]:f.lookupCulture(i)};f.availableCulture=function(k,i){if(!b(k)){return h||g["default"]}k=e.trim(k).toLowerCase();if(arguments.length==2){var j=g.en;g[k]=e.extend(true,{},j,i)}return g[k]};f.localize=function(j,i,k){if(!i){i=h.name||"default"}if(b(i)){i=g[i.toLowerCase()]||{name:i}}CTXS.trace("localize","key="+j+", culture="+i.name);var l=d[i.name];if(arguments.length===3){if(!l){l=d[i.name]={}}l[j]=k}else{if(l){k=l[j]}if(typeof k==="undefined"){k=d["default"][j]}}return k};function c(i){return Object.prototype.toString.call(i)==="[object Array]"}function b(i){return Object.prototype.toString.call(i)==="[object String]"}function a(i){return Object.prototype.toString.call(i)==="[object Object]"}jQuery.globalization=f})(jQuery);(function(a){a.globalization.availableCulture("de",{name:"de",englishName:"German",nativeName:"Deutsch",stringBundle:"scripts/de/ctxs.wrstrings.js",customStringBundle:"contrib/custom.wrstrings.de.js"})})(jQuery);(function(a){a.globalization.availableCulture("es",{name:"es",englishName:"Spanish",nativeName:"espaÃ±ol",stringBundle:"scripts/es/ctxs.wrstrings.js",customStringBundle:"contrib/custom.wrstrings.es.js"})})(jQuery);(function(a){a.globalization.availableCulture("fr",{name:"fr",englishName:"French",nativeName:"franÃ§ais",stringBundle:"scripts/fr/ctxs.wrstrings.js",customStringBundle:"contrib/custom.wrstrings.fr.js"})})(jQuery);(function(a){a.globalization.availableCulture("ja",{name:"ja",englishName:"Japanese",nativeName:"æ—¥æœ¬èªž",stringBundle:"scripts/ja/ctxs.wrstrings.js",customStringBundle:"contrib/custom.wrstrings.ja.js"})})(jQuery);(function(a){a.globalization.availableCulture("zh-CN",{name:"zh-CN",englishName:"Chinese (Simplified, PRC)",nativeName:"ç®€ä½“ä¸æ–‡(ä¸åŽäººæ°‘å…±å’Œå›½)",stringBundle:"scripts/zh-CN/ctxs.wrstrings.js",customStringBundle:"contrib/custom.wrstrings.zh-CN.js"});a.globalization.availableCulture("zh-Hans",{name:"zh-CN",englishName:"Chinese (Simplified, PRC)",nativeName:"ç®€ä½“ä¸æ–‡(ä¸åŽäººæ°‘å…±å’Œå›½)",stringBundle:"scripts/zh-CN/ctxs.wrstrings.js",customStringBundle:"contrib/custom.wrstrings.zh-CN.js"})})(jQuery);(function(a){a.globalization.availableCulture("zh-TW",{name:"zh-TW",englishName:"Chinese (Traditional, Taiwan)",nativeName:"ç¹é«”ä¸æ–‡(å°ç£)",stringBundle:"scripts/zh-TW/ctxs.wrstrings.js",customStringBundle:"contrib/custom.wrstrings.zh-TW.js"});a.globalization.availableCulture("zh-Hant",{name:"zh-TW",englishName:"Chinese (Traditional, Taiwan)",nativeName:"ç¹é«”ä¸æ–‡(å°ç£)",stringBundle:"scripts/zh-TW/ctxs.wrstrings.js",customStringBundle:"contrib/custom.wrstrings.zh-TW.js"})})(jQuery);(function(){var r=false,m=false,p=10,k={"undefined":new l("Undefined category"),alert:new l("Custom alert box"),authentication:new l("Authentication"),categories:new l("Categories"),client:new l("Ajax Clients"),controller:new l("Controller"),documentload:new l("On document ready"),event:new l("OpenAjax Events"),filter:new l("Filter plugin"),imagepreloader:new l("Images preloader"),localize:new l("Localization",false),logintimeout:new l("Login timeout"),myapps:new l("My Apps (Home page)"),ordermarker:new l("Order marker"),pluginassistant:new l("Plugin assistant"),plugindetection:new l("Plugin detection"),receiverconfig:new l("Receiver configuration download"),resize:new l("Resizing"),resources:new l("Resources"),resourcelaunch:new l("Resource launch"),resourcepicker:new l("Resource picker"),resourcerendering:new l("Resource rendering"),sessionservices:new l("Session Services (Workspace control)"),sessiontimeout:new l("Session timeout"),search:new l("Search widget"),userdetails:new l("User details"),usermenu:new l("User Menu"),application:new l("Application"),logoff:new l("Logoff")},t=true,b;function l(v,u){this.name=v;this.status=(u!==undefined)?u:false;this.messages=[];this.addMessage=function(w){if(p===0){return}if(this.messages.length==p){this.messages=this.messages.slice(1)}this.messages.push(w)}}function q(){r=!r;n("tracing delta times: "+r);return CTXS.Trace}function h(u){if(!isNaN(u)){p=u;n("{0} messages will be saved in each tracing category".format(u))}return CTXS.Trace}function f(){var u="These are the categories currently defined for tracing:\n";for(prop in k){u+=prop+"\n"}n(u);return CTXS.Trace}function j(x){if(!c(x)){s('The requested category "{0}" does not exist. Please call CTXS.Trace.listCategories() to see a list of defined categories.'.format(x));return CTXS.Trace}var w=c(x).messages;if(w.length===0){n('There were no messages traced in "{0}" category'.format(x));return CTXS.Trace}var u='These are the last {0} messages (oldest to newest) traced in the category "{1}":\n'.format(p,x);for(var v=0;v<w.length;v++){u+="[{0}] ".format(v+1)+w[v]+"\n"}n(u);return CTXS.Trace}function d(u){u=(u===undefined)?true:u;for(var v in k){k[v].status=u}m=u;return CTXS.Trace}function i(){for(var u=0;u<arguments.length;u++){k[arguments[u]].status=true;m=true}return CTXS.Trace}function a(){for(var u=0;u<arguments.length;u++){k[arguments[u]].status=false}var v=false;for(var w in k){if(k[w].status){v=true}}m=v;return CTXS.Trace}function o(w,y){if(t){t=false;var u=CTXS.Location.href.toString().toLowerCase();if(u.search(/tracing/i)!=-1){d(true)}}if(m){if(e()){if(!y){y=w;w="undefined"}if(k[w]==undefined){s("A non-existent module name was used for tracing. Please add '{0}' to the list of categories in ctxs.trace.js before using it.".format(w));w="undefined"}var x=k[w];x.addMessage(y);if(x.status==false){return}else{y=x.name+": "+y;if(r){if(b==undefined){b=0}var v=new Date().getTime();var z=v-b;b=v;g("@+"+z+" "+y)}else{g(y)}}}}}function c(u){return k[u]}function e(){return((typeof console!=="undefined"))&&console.log}function g(u){if(e()){console.log(u)}}function s(u){if(e()&&console.error){console.error(u)}else{g(u)}}function n(u){if(e()&&console.info){console.info(u)}else{g(u)}}window.CTXS=window.CTXS||{};$.extend(CTXS,{trace:o,Trace:{trace:o,listCategories:f,showHistory:j,getCategory:c,toggleAll:d,enableCategories:i,disableCategories:a,toggleTiming:q,keepMessages:h}})})();(function($){$(document).ready(function(){CTXS.$rulerContainer=$("#ruler-container");CTXS.$ruler=$("#ruler")});function getAGAdvancedMangledCookie(name){var hexLengthString=name.length.toString(16);while(hexLengthString.length<3){hexLengthString="0"+hexLengthString}var results=document.cookie.match("^.*%%"+hexLengthString+name+"=([^;]*)");return results?unescape(results[1]):null}function trimLastCharacter(str){charsToRemove=1;if(str.length>1){code=str.charCodeAt(str.length-2);if(55296<=code&&code<=56319){charsToRemove=2}}return str.substring(0,str.length-charsToRemove)}var _host=document.location.host,_href=document.location.href,_pathname=document.location.pathname,_protocol=document.location.protocol,_port=document.location.port,_origin=_protocol+"//"+_host;window.CTXS=$.extend(window.CTXS||{},{encodeHtml:function(value){return $("<div/>").text(value).html()},encodeHtmlForAttr:function(value){return CTXS.encodeHtml(value).replace(/"/g,"&quot;")},decodeHtml:function(value){return $("<div/>").html(value).text()},compareCategoryName:function(a,b){var aLower=a.toLowerCase(),bLower=b.toLowerCase();if(aLower<bLower){return -1}if(aLower>bLower){return 1}if(a>b){return -1}if(a<b){return 1}return 0},compareCategoryNameAppsMenu:function(a,b){var aSortKey=a.split("\\"),bSortKey=b.split("\\");var comparisonResult=CTXS.compareCategoryName(aSortKey[0],bSortKey[0]);if(comparisonResult==0){if(aSortKey[1].length==0){comparisonResult=-1}else{if(bSortKey[1].length==0){comparisonResult=1}else{comparisonResult=CTXS.compareCategoryName(aSortKey[1],bSortKey[1])}}}return comparisonResult},truncateToFit:function(name,maxWidth,numLines,preserveNumeration){var $rulerContainer=CTXS.$rulerContainer,$ruler=CTXS.$ruler,lineHeight=$ruler.text("x").outerHeight(),maxHeight=lineHeight*numLines,tmp=name,suffix="",nameWithoutSuffix="";$rulerContainer.width(maxWidth).css("white-space",numLines>1?"normal":"nowrap");$ruler.css("line-height",lineHeight+"px");$ruler.text(name);if(preserveNumeration){suffix=tmp.match(/\(\d+\)$/)[0];nameWithoutSuffix=name.substring(0,name.lastIndexOf(suffix))}while($ruler.outerHeight()>maxHeight||$ruler.outerWidth()>maxWidth){if(preserveNumeration){nameWithoutSuffix=trimLastCharacter(nameWithoutSuffix);name=$.trim(nameWithoutSuffix)+"... "+suffix}else{tmp=trimLastCharacter(tmp);name=tmp+"..."}$ruler.text(name)}return name},getCookie:function(name){var results=document.cookie.match("(^|;) ?"+name+"=([^;]*)");return results?unescape(results[2]):null},getCSRFToken:function(){var csrfToken=CTXS.getCookie("CsrfToken");if(csrfToken==null){csrfToken=getAGAdvancedMangledCookie("CsrfToken")}return csrfToken},setCookie:function(name,value,path){if(CTXS.Location.protocol.toLowerCase()==="https:"){value+="; secure"}var cookie=name+"="+value+"; path="+((typeof(path)==="undefined")?"/":path);document.cookie=cookie},updateQueryString:function(url,key,value){var re=new RegExp("([?|&])"+key+"=.*?(&|$)","i");if(url.match(re)){return url.replace(re,"$1"+key+"="+value+"$2")}else{return url+(url.match(/\?/)?"&":"?")+key+"="+value}},getIconId:function(iconurl){if(iconurl){return iconurl.replace(/Resources\/Icon\/([A-Za-z0-9]*).*/,"$1")}return iconurl},canBrowserLaunchDocument:function(documenturl){if(!documenturl){return false}var isLaunchableUnc=CTXS.ClientInfo.isIE()&&documenturl.match(/^\\\\/);var isLaunchableHttp=documenturl.match(/^http(s)?:\/\//);return isLaunchableUnc||isLaunchableHttp},canLaunchResource:function(resource){var canIcaLaunch=($.inArray("ica30",resource.clienttypes)!=-1),canLaunch=canIcaLaunch||(resource.content&&CTXS.canBrowserLaunchDocument(resource.content)),requiresVpn=resource.requiresvpn&&CTXS.AccessGateway.hasAgssoOccurred(),launchProhibited=requiresVpn||resource.disabled||resource.ismobileapp||!resource.clienttypes||CTXS.WorkflowManager.isWorkflowState(resource.subscriptionstatus);return canLaunch&&!launchProhibited},findRequired:function(selector,count){var results=$(document).find(selector);if((count&&!isNaN(count)&&results.length!=count)||results.length==0){CTXS.Events.publish(CTXS.Events.error.elementMissing,selector);return undefined}return results},obliteratePasswords:function(){var $passwords=$("input:password");$passwords.each(function(index,value){var $elt=$(value),password=$elt.val();if(password.length>0){var str=Array(password.length+1).join("*");$elt.val(str)}})},displayDatabaseWarning:function(){var DISPLAYED_DATABASE_WARNING="displayed-database-warning";if(!$("body").hasClass(DISPLAYED_DATABASE_WARNING)){$("body").addClass(DISPLAYED_DATABASE_WARNING);CTXS.alertBox($.localization.string("DatabaseOperationFailure"))}},isUpToDateVersion:function(haveVersion,wantVersion){var haveComponents=haveVersion.split(".");var wantComponents=wantVersion.split(".");for(var ix=0;ix<wantComponents.length;ix++){var have=(ix<haveComponents.length)?parseInt(haveComponents[ix]):0;var want=parseInt(wantComponents[ix]);if(have>want){return true}if(have<want){return false}}return true},isCVPNSession:function(){return/\/cvpn\/.+/i.test(CTXS.Location.href)},getCVPNLogoutURL:function(){return CTXS.Location.protocol+"//"+CTXS.Location.host+"\u002Fcgi/logout"},Location:{host:_host,href:_href,pathname:_pathname,protocol:_protocol,port:_port,origin:_origin,getHash:function(){return document.location.href.split("#")[1]||""}},alternateEval:function(arg){return window.eval(arg)},isHighContrastEnabled:function(){var testDiv=$("<div>").css({background:"url(media/bg_bubbles.jpg)",display:"none"});$("body").append(testDiv);if(testDiv.css("background-image")=="none"){return true}return false}});String.prototype.format=function(){var formatted=this;for(var i=0;i<arguments.length;i++){formatted=formatted.replace("{"+i+"}",arguments[i])}return formatted};if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}})(jQuery);(function(a){a.fn.extend({ctxsDisplayPane:function(){a(".mainpane").hide();this.ctxsLocalize().show();return this},ctxsWrapAsMessagePane:function(){var b=this.html(),c='<div class="ctxsui-messagebox"><div class="messagebox-top"><div class="messagebox-topleft"></div><div class="messagebox-topbody"></div><div class="messagebox-topright"></div></div><div class="messagebox-middle"><div class="messagebox-middleleft"></div><div class="messagebox-middlebody">'+b+'</div><div class="messagebox-middleright"></div></div><div class="messagebox-bottom"><div class="messagebox-bottomleft"></div><div class="messagebox-bottombody"></div><div class="messagebox-bottomright"></div></div></div >';return this.html(a(c))},ctxsCenterOfScreen:function(c){var e=a("body").height(),d=this.find(".ctxsui-messagebox").height(),b;if(c&&c.top&&!isNaN(c.top)){b=c.top}else{b=(e/2)-(d/2);CTXS.trace("alert","centerofscreen: vertical location = {0}. Window height = {1}. Element height = {2}".format(b,e,d))}this.find(".ctxsui-messagebox").css({"margin-left":"auto","margin-right":"auto"});this.css({top:b+"px",position:"relative"}).show();return this},ctxsCenterOfBelt:function(){var i=a("#resources-container"),g=this.width(),f=this.height(),d,h;if(i.is(":hidden")){d=a("body").height()/2;h=a("body").width()/2}else{d=i.position().top+(i.height()/2);h=i.position().left+(i.width()/2)}var c=0;var e=i.find("#appshortcuts-heading");if(e.length){c=e.height()||0}var j=(d-(f/2))-c,b=h-(g/2);CTXS.trace("alert","ctxsCenterOfBelt: vertical location = {0}. Belt.position.top = {1}. Belt.height = {2}. Element height = {3}".format(j,i.position().top,i.height(),f));CTXS.trace("alert","ctxsCenterOfBelt: horizontal location = {0}. Belt.position.left = {1}. Belt.width = {2}. Element width = {3}".format(b,i.position().left,i.width(),g));this.css({position:"fixed",left:b,top:j}).show();return this},ctxsCreateScrollPane:function(){this.jScrollPane({verticalGutter:0,enableKeyboardNavigation:false});this.find(".jspVerticalBar .jspTrack").append('<div class="jspTrackBg" />');this.find(".jspVerticalBar .jspDragTop").after('<div class="jspDragMiddle" />');this.mousedown(function(){a(this).addClass("hide-outline")});return this},ctxsUpdateScrollPane:function(){var b=this.data("jsp");if(b){b.reinitialise();this.find(".jspVerticalBar .jspTrack").append('<div class="jspTrackBg" />');this.find(".jspVerticalBar .jspDragTop").after('<div class="jspDragMiddle" />')}return this},ctxsScrollToTop:function(){var b=this.data("jsp");if(b){b.scrollToY(0)}return this},ctxsBindFocusWithin:function(d){d=d||{};var b=d.selector||":tabbable";this.ctxsUnbindFocusWithin();var c=this.find(b);a(this).bind("keydown.cycle",function(e){if(e.shiftKey&&e.keyCode==CTXS.KEY_TAB){if(document.activeElement==c.first().get(0)){c.last().focus();return false}}else{if(e.keyCode==CTXS.KEY_TAB){if(document.activeElement==c.last().get(0)){c.first().focus();return false}}}return true});return this},ctxsUnbindFocusWithin:function(){a(this).unbind("keydown.cycle");return this},ctxsEnableArrowNavigation:function(e){e=e||{};var c=e.selector||":tabbable";var d=this.find(c),b=d.length;a(this).bind("keydown.arrows",function(f){if(f.keyCode==CTXS.KEY_DOWN||f.keyCode==CTXS.KEY_UP){var g=a.inArray(document.activeElement,d);if(f.keyCode==CTXS.KEY_DOWN){a(d[(g+1)%b]).focus()}else{if(f.keyCode==CTXS.KEY_UP){a(d[(b+(g-1))%b]).focus()}}}});return this},ctxsDisableArrowNavigation:function(){a(this).unbind("keydown.arrows");return this},ctxsUnifyHoverFocus:function(d){d=d||{};var c=this,b=d.selector||":tabbable",e=d.hoverClass||"active";if(d.exclude!==undefined){b=b+":not("+d.exclude+")"}this.on("mouseenter.unify",b,function(){if(!a(this).is(":tabbable")){a(this).find(":tabbable").first().focus()}else{a(this).focus()}});this.on("focusin.unify",b,function(){c.find(b).removeClass(e);a(this).addClass(e)});this.on("focusout.unify",b,function(){a(this).removeClass(e)});return this},ctxsUnbindHoverFocusEvents:function(){this.off("mouseenter.unify");this.off("focusin.unify");this.off("focusout.unify");return this},ctxsHandleEscapeKeyInDialog:function(){var b=this;b.on("keyup.escape",".custombutton",function(d){if(d.keyCode==CTXS.KEY_ESCAPE){var c=b.find(".cancelDialogButton .custombutton");if(c.size()==1){c.click()}else{CTXS.trace("alert","CTXS.alertBox does not have a cancel button.")}CTXS.Events.publish(CTXS.Events.resources.relinquishFocus);return false}return true});return this},ctxsPlaceFocusOnFirstElement:function(c){c=c||{};var b=c.selector||":focusable";this.find(b).first().focus();return this},ctxsReapplyText:function(){return this.each(function(){var b=a(this);b.text(b.text())})}});window.CTXS=a.extend(window.CTXS||{},{button:function(c,d){var b='<div class="resizablebutton"><span class="leftdoor"><span class="rightdoor"></span></span></div>';return c.each(function(f,g){var e=a(g);if(e.is("a")){if(d){var h=e.text();e.text("").addClass("leftdoor").append('<span class="rightdoor">'+h+"</span>").wrap('<div class="resizablebutton"></div>')}else{e.wrap(b)}}else{if(e.is("input")){e.wrap(b).closest(".leftdoor").hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")})}}}).closest(".resizablebutton")},displayMessagePane:function(b){a(".mainpane").hide();return a("#messagepane").html(b).ctxsWrapAsMessagePane().ctxsCenterOfScreen({top:"205"})},showAppsView:function(b){if(CTXS.usingSwitcher()){return a("#resources-switcher").ctxsSwitcher("showAppsView",b)}},showDesktopsView:function(b){if(CTXS.usingSwitcher()){return a("#resources-switcher").ctxsSwitcher("showDesktopsView",b)}},usingSwitcher:function(){return a(".switcher-button").length>0},alertBox:function(m,k,n){CTXS.trace("alert","CTXS.alertBox called with message: {0}".format(m));var l=this,c;n=n||{};n.title=n.title||"";n.requiresDefaultButton=n.requiresDefaultButton!==false?true:false;if(m=="close"){a(document).unbind("keydown.alertbox");c=a(".dialogBoxOverlay");c.off("keyup.escape");a("#mask").off("click.mask");a("input.searchbox-textbox").attr("disabled",false);CTXS.Events.publish(CTXS.Events.resources.relinquishFocus);if(n.onclose){n.onclose(c)}return c.hide()}a("input.searchbox-textbox").attr("disabled","disabled");if(a(".dialogBoxOverlay .ctxsui-messagebox").length===0){var o='<div id="mask"></div>',f='<div class="cloud"></div>',g=a('<div><div class="ctxsAlert"><div class="messagebox-title">{0}</div><div class="messagebox-body">{1}</div><div class="messagebox-buttons"></div><div class="messagebox-extradetails"></div></div></div>');g.ctxsWrapAsMessagePane();c=a('<div class="dialogBoxOverlay">'+o+f+"</div>");c.append(g);a("#alertbox").append(a(c));a("#mask").on("click.mask",function(){l._placeFocus()})}else{c=a(".dialogBoxOverlay");c.find(".messagebox-extradetails").empty()}CTXS.trace("alert","alertbox constructed = "+c.html());c.find(".messagebox-title").html((n&&n.title)||"");var e="";if(typeof m==="string"){e=a('<p id="messagebox-text">').text(m)}else{e=m}c.find(".messagebox-body").html(e);if(CTXS.ClientInfo.isIE()){c.find("input[type=text], input[type=password]").css("line-height","25px")}if((!k||k.length==0)&&n.requiresDefaultButton){k=[];k.push({text:a.localization.string("OK"),isDefault:true,action:function(){CTXS.alertBox("close")}})}var j=[];for(var h=0;h<k.length;h++){var b=k[h];j[h]=CTXS.button(a('<a href="#" class="custombutton">'+b.text+"</a>"));j[h].click((function(i){return function(){i();return false}})(b.action));if(b.isDefault){j[h].addClass("defaultDialogButton")}if(b.isCancel){j[h].addClass("cancelDialogButton")}}c.find(".messagebox-buttons:first").empty();a(j).each(function(i,p){c.find(".messagebox-buttons:first").append(p)});c.show();c.find(".cloud").ctxsCenterOfBelt();c.find(".ctxsui-messagebox").ctxsCenterOfBelt();l._placeFocus();c.ctxsHandleEscapeKeyInDialog();if(n&&n.callbackfunction){var d=c.find(".messagebox-extradetails");n.callbackfunction(d)}c.find("a").attr("tabindex",1);c.ctxsBindFocusWithin({selector:"a"});return c},_placeFocus:function(){var c=a(".dialogBoxOverlay"),b=c.find(".defaultDialogButton");if(b.size()==1){b.find(".custombutton").focus()}else{c.ctxsPlaceFocusOnFirstElement()}},popupsEnabled:function(c){var b=window.open("","testwindow","height=1,width=1,left=700000,top=7000000,menubar=no,scrollbars=no,status=no,resizable=no,toolbar=no");setTimeout(function(){if(!b||b.outerHeight===0){if(b){b.close()}CTXS.alertBox(c)}else{if(b){b.close()}}},25)},})})(jQuery);jQuery.ctxsAjax=function(b){if(!b){return}var c=0;var e=2;if((typeof(b.data)==="undefined")||(b.data==="")){b.data={}}var a=function(){window.location=CTXS.AccessGateway.getLogonPointUrl()};var d=function(h){var i=h.getResponseHeader("X-Citrix-Application");return i=="Receiver for Web"};var g=function(h){return h.status==503&&b.callErrorHandlerFor503&&d(h)};var f=function(){$.ajax({type:b.type,url:b.url,dataType:b.dataType,data:b.data,async:b.async,traditional:true,beforeSend:function(l,k){var j=CTXS.getCSRFToken();if(j!=null){l.setRequestHeader("Csrf-Token",j)}var i=CTXS.SecuritySettings.isUsingHttps()?"Yes":"No";l.setRequestHeader("X-Citrix-IsUsingHTTPS",i)},complete:function h(j,k){if(j.status==200&&CTXS.AccessGateway.hasAgssoOccurred()&&!d(j)){a();return}if(k==="success"){if(b.refreshSession&&b.suppressEvents!=true){CTXS.Events.publish(CTXS.Events.session.refreshed)}if(b.success){if(b.dataType==="xml"){var i=j.responseXML;if((typeof(i)==="undefined")&&window.ActiveXObject){i=new ActiveXObject("Microsoft.XMLDOM");i.loadXML(j.responseText)}b.success(i,k,j)}else{if(b.dataType==="json"){b.success(jQuery.parseJSON(j.responseText),k,j)}else{b.success(j.responseText,k,j)}}}if(b.complete){b.complete(j,k)}}else{if(k==="error"&&j&&j.status.toString().match("^5")=="5"&&!g(j)){c++;if(c===e||b.noRetry){if(b.opType==="appLaunch"&&b.handle){b.handle.close()}if(b.suppressEvents){if(b.error){b.error(j,k)}if(b.complete){b.complete(j,k)}}else{CTXS.Events.publish(CTXS.Events.error.terminalState)}}else{f()}}else{if(j.status==403&&!b.suppressEvents){CTXS.Events.publish(CTXS.Events.error.terminalState)}else{CTXS.trace("application","ajax wrapper - request failed with status:  "+j.status);if(b.error){b.error(j,k)}if(b.complete){b.complete(j,k)}}}}}})};f()};(function(){window.CTXS=window.CTXS||{};CTXS.Localization={init:function(){CTXS.trace("application","CTXS.Localization.init() called");var c=CTXS.Config.session.userLanguages;if(c!==""){$.globalization.preferCulture(c);var b=$.globalization.currentCulture();var a=b.name;if(a!=="en"){if(b.stringBundle){this.getScript(b.stringBundle)}if(b.customStringBundle){this.getScript(b.customStringBundle)}$("body").addClass(a)}}},getScript:function(a){$.ctxsAjax({dataType:"script",url:a,async:false})}}})();(function(a){var b={};b.addStringBundle=function(e,d){var f=a.globalization.localize("ctxs.wrstrings_builtin",e,d);var g=a.globalization.localize("ctxs.wrstrings_custom",e)||{};var c=a.extend(f,g);a.globalization.localize("ctxs.wrstrings",e,c)};b.customStringBundle=function(c,f){var d=a.globalization.localize("ctxs.wrstrings_builtin",c);var e=a.globalization.localize("ctxs.wrstrings_custom",c,f);if(typeof d!=="undefined"){a.globalization.localize("ctxs.wrstrings",c,a.extend(d,e))}};b.string=function(f){var d=a.globalization.localize("ctxs.wrstrings",a.globalization.currentCulture());var c=d[f];if((typeof c!=="undefined")&&(arguments.length>1)){var e;for(e=1;e<arguments.length;e++){c=c.replace("{"+(e-1)+"}",arguments[e])}}return c};jQuery.localization=b;a.fn.ctxsLocalize=function(){var d=a.globalization.currentCulture();CTXS.trace("localize"," culture="+d.name);var c=a.globalization.localize("ctxs.wrstrings",d);a(this).find("[class*=_ctxstxt_]").each(function(e){var f=this.className.match(/_ctxstxt_([^ ]*)/)[1];a(this).html(c[f])});a("[class*=_ctxstip_]").each(function(e){var f=this.className.match(/_ctxstip_([^ ]*)/)[1];a(this).attr("title",c[f])});a("[class*=_ctxsalt_]").each(function(e){var f=this.className.match(/_ctxsalt_([^ ]*)/)[1];a(this).attr("alt",c[f])});return this}})(jQuery);(function(){var a="com.citrix.web.";var c=false;var b={};function d(g){if(g.length>1&&g[g.length-1]&&g[g.length-1].extrainfo){return" Extra info: "+g[g.length-1].extrainfo}return""}function f(h){try{var g=h.toString().replace(/\{[\s\S]*\}/i,"");if(!c||g.search(/^(function)\s?\(/i)==-1){return g}else{return h.toString().replace(/(\n|\s+)/g,"")}}catch(i){return""}}function e(h,j){for(var g=0;g<j.length;g++){CTXS.Events.subscribe(h,j[g],arguments[2])}}window.CTXS=window.CTXS||{};CTXS.Events={publish:function(h,i){var j=(this.publish&&this.publish.caller);j=f(j);var g=d(arguments);CTXS.trace("event","Published event {0} , publishing function: {1}. {2}".format(h,j,g));if(!b[h]){CTXS.trace("event",'** Publishing an event "{0}" that no one listens to.'.format(h))}OpenAjax.hub.publish(a+h,i)},subscribe:function(i,k){b[i]=b[i]?++b[i]:1;if(typeof k=="object"){e.apply(this,arguments);return}var j=f(k)||"anonymous";var h=d(arguments);CTXS.trace("event","Subscribed to event {0}, function name: {1}. {2}".format(i,j,h));var g=function(){CTXS.trace("event",'Responding to event {0} by function "{1}". {2}'.format(i,j,h));k.apply(this,arguments)};OpenAjax.hub.subscribe(a+i,g)},helpers:{toggleTracingAnonymousFunctions:function(){c=!c;return c},displaySubscriptionsSummary:function(){var g="";for(var h in b){g+=h+": "+b[h]+"\n"}console.log(g)}}}})();(function(a){a.localization.addStringBundle("en",{AcceptTermsMessage:"Please accept the terms of the licensing agreement before installing Citrix Receiver.",ActivateReceiver:"Activate...",ActivateReceiverToolTip:"Activate Receiver on your desktop",Add:"Add",AddYour:"ADD YOUR",AllApps:"All Apps",AppIconColumn:"App icon column",ApplicationsAdded:"The following applications will be added:",ApplicationsRemoved:"The following applications will be removed:",ApplicationsRequestedApproved:"Some applications you requested have been approved.",ApplicationsRequestedApprovedOrDenied:"Some applications you requested have been approved or denied.",ApplicationsRequestedDenied:"Some applications you requested have been denied.",AppNameColumn:"App name column",AppRequestApproved:"App request approved",AppRequestApprovedWithName:'"{0}" is approved.',AppRequestPendingApproval:"App request pending approval",AppRequestPendingApprovalCannotStart:'"{0}" is pending approval and cannot be started.',AppRequestDenied:"App request denied",AppRequestDeniedWithName:'Access to "{0}" is denied.',AppShortcuts:"App Shortcuts",AppShortcutsTableCaptionAllApps:"App shortcut links for all apps and desktops",AppShortcutsTableCaptionOtherApps:"App shortcut links for all other apps",AppShortcutsTableCaptionSubscribedApps:"App shortcut links for my apps and desktops",AppUnavailable:"Currently unavailable; contact your help desk",AppUnavailablePlatform:"Unavailable on this platform",AppUnavailableClientless:"Unavailable remotely unless using a VPN connection",DocUnavailableBrowser:"Unavailable on this browser",Cancel:"Cancel",CannotCompleteYourRequest:"Cannot complete your request.",CannotStartApp:'Cannot start app "{0}".',CannotStartDesktop:'Cannot start desktop "{0}".',CannotStartDesktopSuggestRestart:'Cannot start desktop "{0}". Try restarting it.',CannotRestartDesktop:'Cannot restart desktop "{0}".',CitrixCopyright:"\u00a9 2013 Citrix Systems, Inc. All rights reserved. \u00A0| \u00A0",CitrixLicenseAgreement:"Citrix license agreement",CitrixReceiver:"Citrix Receiver",ClickContinue:"click <strong>Continue</strong>.",ClickInstall:"Install Citrix Receiver to access your applications",ClickLogOnToContinue:"Click Log On to continue.",ClickToExpandFolder:"Click to expand folder",ClickUpgrade:"Click install to upgrade Citrix Receiver",CloseSearchResults:"Close search results",CloseYourBrowserToEndSession:"Please close your browser to log off.",ConfirmInstallationComplete:"Confirm installation is complete",Connect:"Connect",Continue:"Continue",CookiesAreDisabledTitle:"Cookies disabled",CookiesAreDisabledBody:"Please enable cookies in your browser before using this version of Citrix Receiver.",CredentialsRequired:"Your logon has expired. Please log on again to continue.",DesktopAlreadyInUse:'The desktop "{0}" is already in use.',DatabaseOperationFailure:"Citrix Receiver cannot currently add, remove, or reposition apps. Any changes you make will not be preserved for future sessions.",DesktopInMaintenance:'The desktop "{0}" is temporarily unavailable due to planned maintenance.',DesktopRestartWarningText:"Restarting your desktop may solve the problem, but you will lose any unsaved work.",DesktopRestartWarningTitle:'Do you want to restart desktop "{0}"?',DesktopTooltipFormat:"{0} - {1}",Disconnect:"Disconnect",DisconnectApps:"Disconnect apps",DisplayInFramesNotAllowed:"This site has been loaded within another web page. This page will be refreshed to reload the site.",DoYouWantToStartApp:'Do you want to start "{0}"?',Featured:"Featured",FavoriteApps:"FAVORITE APPS",StoreButton:"Click to add apps",IAgreeWith:"I agree with the",InfoBarSecurityInformation:"<b>SECURITY INFORMATION</b> <p>Allowing the ActiveX control to run will install software on your computer.</p>",InsecureConnection:"Insecure connection",Install:"Install",InstallationBegins:"Please wait while the download process begins.",KeepTyping:"Keep typing...",LessInformation:"Less information",LicenseAgreementContent:"<b>CITRIX(R) LICENSE AGREEMENT</b><br />Use of this component is subject to the Citrix license covering the Citrix product(s) with which you will be using this component. This component is only licensed for use with such Citrix product(s).<br /><br />CTX_code EP_T_A34320",ListFailure:"Cannot get App list from the server",LoginTimedout:"Logon has timed out due to inactivity.",LogOff:"Log Off",LogoffInProgress:"Logging off Citrix Receiver...",LogOffSessionsFailed:"If any apps are still running, please exit them manually.",LoggedOffWithProblems:"Logoff error",LogOn:"Log On",Match:"match",Matches:"matches",MatchesIn:"Matches in",MoreInformation:"More information",MyApps:"My Apps",MyAppsAndDesktops:"My apps and desktops",NoAppsOrDesktopsAvailable:"No apps or desktops are available at this time.",NoMatches:"No matches found",OK:"OK",OnceComplete:"After Citrix Receiver is installed, ",OnceReceiverInstalled:"After Citrix Receiver is installed...",OtherCategories:"Other categories",OtherMatches:"Other matches",Others:"Others",PopupBlockerReconnectApps:"Citrix Receiver has reconnected your apps. To see your apps, allow pop-ups from this website in your browser.",PopupBlockerDesktopAutoLaunch:"Citrix Receiver has connected your desktop. To see your desktop, allow pop-ups from this website in your browser.",Refresh:"Refresh",Remove:"Remove",RequestApproval:"Do you want to request approval to use {0}?",ResourceIsNotAvailable:'"{0}" is not available.',Restart:"Restart",RunAppOnMobilePhoneOrTablet:"Run this app on your mobile phone or tablet.",Search:"Search",SearchByName:"Search for apps",SearchCount:"{0} of {1}",SecurityDetails:"Security details",SecurityInformation:"<b>SECURITY INFORMATION</b> <p>Whenever you download a file over the Internet, there is always a risk that it will contain a security threat (a virus or a program that can damage your computer and the data stored on it). To check the file for security threats, click Install and then save the file to a suitable location on your computer. Scan the file with an up-to-date antivirus program and carry out any other checks required by your corporate security policy before running/installing the file. You may need to reconfigure the security settings on your computer to install or run the file.</p>",SendRequest:"Send Request",SessionExpiresInMinutes:"Citrix Receiver will time out in {0} minutes and {1} seconds due to inactivity.",SessionEnded:"Your session has ended. Please log on again to continue.",SessionsListFailure:"Cannot start your session. Wait a few minutes and try to log on again. If you still experience problems, contact your help desk.",SessionTimedout:"Your session has timed out due to inactivity.",SessionTimedoutWithLogoffProblems:"Your session has timed out due to inactivity",SessionTimeout:"Session timeout",ShortcutUrlColumn:"Shortcut URL column",ShortcutUrlFor:"Shortcut URL for {0}",SkipToLogon:"Log on",SkipToLogonTip:"Click here to skip to log on",SkipToApps:"Skip to Apps",SkipToDesktops:"Skip to Desktops",SoftwareNotDetected:"Software not detected",SoftwareNotDetectedDetails:"Citrix Receiver cannot be detected on your computer. If you know that Citrix Receiver is installed, you can click Continue to log on. If you need assistance, contact your help desk.",Start:"Start",StreamingNotAvailable:"Streaming applications are not available.",SwitcherApps:"Apps",SwitcherDesktops:"Desktops",SyncNow:"Sync Now",ThirdPartyNotices:"Third Party Notices",UpgradeCloseBrowser:"You may be asked to close your browser during the installation process.",UpgradeInProgress:"Upgrading Citrix Receiver software...",UpgradeLater:"Upgrade later",UpgradeLaterTip:"Click here to continue without upgrading Citrix Receiver",YouAreLoggedOff:"You have logged off successfully.",YouCannotAddApps:"You cannot add apps at this time.",YouCannotUseAppsOrDesktops:"There are no apps or desktops assigned to you at this time.",YouCannotUseDesktops:"There are no desktops assigned to you at this time.",ChangePassword:"Change password...",PasswordExpiryNotificationTitle:"Do you want to change your password?",PasswordExpiryNotificationText:"Your password will expire in {0} {1}.",PasswordExpiryNotificationTextSuffixSingleDay:"day",PasswordExpiryNotificationTextSuffixMultiDays:"days",PasswordExpiryNotificationOkButtonText:"Change Now",PasswordExpiryNotificationCancelButtonText:"Not Now",ChangePwdWarningText:"Logoff is required after a successful password change. You will need to log on again to use your apps."})})(jQuery);$.extend(CTXS.Events,{error:{terminalState:"error.terminalstate",elementMissing:"error.elementmissing"},configuration:{failure:"configuration.failure",updated:"configuration.updated",loaded:"configuration.loaded"},pluginAssistant:{done:"pluginAssistant.done"},preLogin:{done:"preLogin.done"},postLogin:{done:"postLogin.done"},session:{refreshed:"session.refreshed",expired:"session.expired",refreshFailed:"session.refreshfailed"}});(function(){function d(){function i(j){if(j&&j.srcElement&&j.srcElement.tagName!="INPUT"&&j.srcElement.tagName!="SELECT"){return false}return true}CTXS.Application.$panePluginAssistant=CTXS.findRequired("#pluginassistant");CTXS.Application.$paneAuthentication=CTXS.findRequired("#authentication");CTXS.Application.$paneCredentialUpdate=CTXS.findRequired("#credentialupdate");CTXS.Application.$paneResources=CTXS.findRequired("#resources");CTXS.Application.$hiddenFrame=CTXS.findRequired("#hiddeniframes");document.body.style.cursor="default";document.body.onselectstart=i;$("body").css("overflow","hidden");f()}function g(){CTXS.trace("application","init called");CTXS.Localization.init();CTXS.SecuritySettings.init();if(CTXS.isHighContrastEnabled()){$("body").addClass("high-contrast")}if(CTXS.AppShortcuts.isShortcutViewModeEnabled()){b();return}if(typeof CTXS.Application.preLoginHook=="function"&&CTXS.getCookie(CTXS.COOKIE_PRE_LOGIN_SCRIPT_DONE)!="yes"){CTXS.setCookie(CTXS.COOKIE_PRE_LOGIN_SCRIPT_DONE,"yes",CTXS.Location.pathname);CTXS.Application.preLoginHook()}else{CTXS.PluginDetection.init()}}function e(j,i){CTXS.trace("application","required element {0} is missing from application".format(i))}function f(){CTXS.displayTemplate("OneMomentPlease")}function h(){CTXS.LogoffManager.logoffFatalError()}function b(){var i=[CTXS.RESOURCE_DETAILS.CORE];if(CTXS.AppShortcuts.isShortcutViewModeEnabled()){i.push(CTXS.RESOURCE_DETAILS.APPSHORTCUTS)}CTXS.ResourcesClient.requestResources(CTXS.Config.storeProxy.resourcesProxy.listURL,i)}function c(i){var j=CTXS.Config.prePopulatedCredentials;CTXS.ImagesPreloader.preloadCategory(CTXS.ImagesPreloader.categories.authentication,function(){if(!$("#logonbox-logonform").data("ctxsAuthentication")){CTXS.trace("application","creating authentication widget");$("#logonbox-logonform").ctxsAuthentication({url:CTXS.Config.authManager.loginURL,prePopulatedCredentials:j})}CTXS.trace("application","logging in");$("#logonbox-logonform").ctxsAuthentication("login");CTXS.trace("application","displaying authentication pane");CTXS.Application.$paneAuthentication.ctxsDisplayPane();$("#copyrightFooterText").text($.localization.string("CitrixCopyright")).append('<a href="ThirdPartyNotices.htm" target="_blank">'+$.localization.string("ThirdPartyNotices")+"</a>")})}function a(){var j=$.localization.string("LogOn"),i=[{text:j,action:function(){document.location.reload(false)}}];CTXS.alertBox($.localization.string("CredentialsRequired"),i)}window.CTXS=window.CTXS||{};CTXS.Application={preinit:d,init:g,handleElementMissing:e,displayWaitingMessage:f,displayTerminalError:h,requestResources:b,initAuthentication:c,handleChallenge:a}})();$.extend(CTXS.Events,{workspaceControl:{listFailure:"workspacecontrol.list.failure",listSuccess:"workspacecontrol.list.success"},resources:{filter:"resources.filter",usernameSuccess:"resources.username.success",launchStatus:"resources.launch.status",listFailure:"resources.list.failure",listSuccess:"resources.list.success",unauthorized:"resources.unauthorized",challenged:"resources.challenged",powerOffStatus:"resources.poweroff.status",subscriptionStatus:"resources.subscription.status",updatePositionSuccess:"resources.updateposition.success",updatePositionFailure:"resources.updateposition.failure",relinquishFocus:"resources.relinquish.focus",assignDesktopStatus:"resources.assigndesktop.status",viewChanged:"resources.viewchanged"},appShortcuts:{validationComplete:"appshortcuts.validation.complete"}});(function(i){var n=false,d=CTXS.Location.getHash(),f=false,e=null,q=null,g=null,a=null;function c(){return(d==="/mode/view-appshortcuts")}function m(){o();return f}function j(){o();return g}function p(){o();if(!f){return}var s=(CTXS.Config.userInterface.appShortcuts.enabled==="true");if(!s){CTXS.alertBox(i.localization.string("CannotCompleteYourRequest"));return}if(g===null||!l(g)){CTXS.alertBox(i.localization.string("ResourceIsNotAvailable",q));return}if(g.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.PENDING){CTXS.alertBox(i.localization.string("AppRequestPendingApprovalCannotStart",g.name));return}else{if(g.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.APPROVED){CTXS.WorkflowManager.workflowApprovedNotificationAppShortcuts(g,a,document.referrer);return}else{if(g.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.DENIED){CTXS.WorkflowManager.workflowDeniedNotificationAppShortcuts(g);return}else{if(!CTXS.canLaunchResource(g)){var r=g.isdesktop?"CannotStartDesktop":"CannotStartApp";CTXS.alertBox(i.localization.string(r,q));return}}}}if(g.requiresworkflow&&(g.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.NOTSUBSCRIBED||g.subscriptionstatus==null)){CTXS.WorkflowManager.workflowStartNotification(null,g)}else{CTXS.ResourcesClient.validateAppShortcutLaunch(g,a,document.referrer)}}function l(t){var s=(CTXS.Config.userInterface.uiViews.showAppsView==="true");var r=(CTXS.Config.userInterface.uiViews.showDesktopsView==="true");return t.isdesktop?r:s}function k(t,u){var r=(u.result===CTXS.APP_SHORTCUTS.VALIDATION_PROMPT);var s=!CTXS.ICA.isCorrectZone;if(r||s){b()}else{if(u.result===CTXS.APP_SHORTCUTS.VALIDATION_SUCCESS){h()}else{CTXS.Events.publish(CTXS.Events.error.terminalState)}}}function b(){var s=[{text:i.localization.string("Start"),isDefault:true,action:function(){CTXS.alertBox("close");h()}},{text:i.localization.string("Cancel"),isCancel:true,action:function(){CTXS.alertBox("close")}}];var r=i.localization.string("DoYouWantToStartApp",q);CTXS.alertBox(r,s)}function h(){var s=!g.isdesktop&&(g.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.NOTSUBSCRIBED||g.subscriptionstatus==null);if(s){i("#myapps-pane").ctxsMyApps("add",g)}var r='.resource[index="'+g.index+'"] :tabbable';i("#resources-container").find(r).focus();CTXS.launchResource(g);if(s){g.skipFadeInOnSubscribe=true;CTXS.ResourcesClient.subscription(g,"subscribe")}}function o(){if(n){return}var t=d.split("/");f=(t.length===4)&&(t[1]==="launch");if(f){e=decodeURIComponent(t[2]);q=CTXS.encodeHtml(e);a=decodeURIComponent(t[3]);for(var r=0;r<CTXS.resources.length;r++){var s=CTXS.resources[r];if(s.name===e){g=s;break}}}n=true}CTXS.Events.subscribe(CTXS.Events.appShortcuts.validationComplete,k);i(window).bind("hashchange",function(){var t=d,r=CTXS.Location.getHash(),s=function(u){return u.indexOf("/mode/")===0||u.indexOf("/launch/")===0};if(s(t)||s(r)){document.location.reload(false)}});window.CTXS=window.CTXS||{};CTXS.AppShortcuts={isShortcutViewModeEnabled:c,isAppShortcutLaunch:m,getAppShortcutResource:j,validateAppShortcutLaunch:p}})(jQuery);(function(){function e(k){this.categoryname=k;this.totalImagesCount=0;this.loadedImagesCount=0;this.urls=[]}var a=[],b=[],f={store:"store",pluginAssistant:"pluginassistant",authentication:"authentication",others:"others"},h={pluginassistant:new e(f.pluginAssistant),store:new e(f.store),authentication:new e(f.authentication),others:new e(f.others)};function j(k){if(typeof k==="function"){k()}else{if(typeof k==="string"){CTXS.Events.publish(k)}}}function c(k,l){CTXS.trace("imagepreloader","checking if all images in category '{0}' loaded. LoadedImagesCount = {1}, Total images count = {2}".format(k,h[k].loadedImagesCount,h[k].totalImagesCount));if(h[k].loadedImagesCount===h[k].totalImagesCount){clearInterval(b[k]);j(l);CTXS.trace("imagepreloader",'all images in category "{0}" are loaded. LoadedImagesCount = {1}, Total images count = {2}'.format(k,h[k].loadedImagesCount,h[k].totalImagesCount))}}function g(k){k=(k)?k:CTXS.Location.href;var l="\u002F";var n=k.split(l);n.pop();var m=n.join(l);if(m!=""){m+="/"}return m}function i(){var m;for(var o=0;o<document.styleSheets.length;o++){var p=g(document.styleSheets[o].href);if(document.styleSheets[o].cssRules){m=document.styleSheets[o].cssRules}else{if(document.styleSheets[o].rules){m=document.styleSheets[o].rules}}if(m){for(var l=0;l<m.length;l++){if(m[l].style&&m[l].style.cssText){var n=m[l].style.cssText.match(/[^\(]+\.(gif|jpg|jpeg|png)/g);if(n){n=(n+"").replace('"',"");var k=n;if(k.search(/^http/i)!==0){k=p+k}var q;if(k.match(/uiareas\/PluginAssistant/gi)){q=f.pluginAssistant}else{if(k.match(/uiareas\/Store/gi)){q=f.store}else{if(k.match(/uiareas\/Authentication/gi)){q=f.authentication}else{q=f.others}}}h[q].urls.push(k);h[q].totalImagesCount++}}}}}CTXS.trace("imagepreloader","Scanned through images in all CSS files: store = {0}, pluginassistant = {1}, authentication = {2}, others = {3}".format(h.store.urls.length,h.pluginassistant.urls.length,h.authentication.urls.length,h.others.urls.length))}function d(o,m){if(a[o]){j(m);return}a[o]=true;CTXS.trace("imagepreloader",'Preloading images in category "{0}", number of images = {1}'.format(o,h[o].urls.length));if(b[o]==null){b[o]=setInterval(function(){CTXS.trace("imagepreloader","setting timer for category "+o);c(o,m)},500)}for(var l=0;l<h[o].urls.length;l++){var k=h[o].urls[l];var n=new Image();$(n).attr("category",o);$(n).load(function(){h[$(this).attr("category")].loadedImagesCount++}).error(function(){h[$(this).attr("category")].loadedImagesCount++;CTXS.trace("imagepreloader",'One image in category "{0}" could not be loaded, this image should be probably removed from a CSS file.',$(this).attr("src"))}).attr("src",k)}}window.CTXS=window.CTXS||{};CTXS.ImagesPreloader={categories:f,extractAllImagesFromCss:i,preloadCategory:d}})();CTXS.ImagesPreloader.extractAllImagesFromCss();(function(){window.CTXS=window.CTXS||{};CTXS.IconsLoader={loadedIcons:{},uniqueIds:{},loadIcons:function(a){CTXS.trace("imagepreloader","load icons for resources. number of resources = "+a.length);$(a).each(function(c,d){var e=d.iconurl,b=d.iconid;if(!CTXS.IconsLoader.uniqueIds[b]){CTXS.IconsLoader.uniqueIds[b]=true;$('<img iconid="'+b+'" src="'+e+'"></img>').one("load",function(){CTXS.IconsLoader.loadedIcons[b]=true;$('img[iconid="'+b+'"]').attr("src",e)})}})}}})();(function(){window.CTXS=window.CTXS||{};CTXS.Config={parseConfig:function(d,c){var a=function(f,e){$(f.attributes).each(function(h,g){e[g.name]=g.nodeValue})};var b=function(f,e){a($(f)[0],e);$(f).children().each(function(g,j){var h=j.tagName;e[h]={};b(j,e[h])})};b($(c).find("clientSettings")[0],CTXS.Config);CTXS.Events.publish(CTXS.Events.configuration.updated)}}})();(function(){var b=navigator.userAgent||"",a=navigator.vendor||"";function d(e){return(b.indexOf(e)>=0)}function c(e){return(a.indexOf(e)>=0)}window.CTXS=window.CTXS||{};CTXS.ClientInfo={setUserAgent:function(e){b=e},setVendor:function(e){a=e},isChromeOS:function(){var e=(navigator.userAgent.search(/CrOS/)==-1)||(navigator.appVersion.search(/CrOS/)==-1)||(navigator.platform.search(/Linux/i)==-1)?false:true;return e},isIE:function(){return(d("MSIE")||d("Internet Explorer"))},isWindowsRT:function(){return this.isWindows()&&d("ARM")},isFirefox:function(){return d("Firefox")},isChrome:function(){return d("Chrome")},isSafari:function(){return c("Apple")},isWindows:function(){return d("Win")},isMacOSX:function(){return(d("Mac OS X")&&(!d("Mobile")))},isOlderThan:function(g,e){e=e||this.getVersion();var j=g.split("."),h=e.split(".");for(var f=0;f<j.length;f++){if(!h[f]){return true}if(!j[f]){return false}if(parseInt(j[f])>parseInt(h[f])){return true}if(parseInt(h[f])>parseInt(j[f])){return false}}return false},getVersion:function(){var e,g,f;if(this.isIE()){e=b.indexOf("MSIE");if(e>0){g=b.substr(e+5);f=g.substr(0,g.indexOf(";"));return f}return -1}else{if(this.isFirefox()){e=b.indexOf("Firefox/");if(e>0){return b.substr(e+8)}return -1}else{if(this.isChrome()){e=b.indexOf("Chrome/");if(e>0){g=b.substr(e+7);f=g.substr(0,g.indexOf(" "));return f}return -1}else{if(this.isSafari()){e=b.indexOf("Version/");if(e>0){g=b.substr(e+8);f=g.substr(0,g.indexOf(" "));return f}return -1}else{return -1}}}}},getMacOSXVersion:function(){if(!(this.isMacOSX()&&(this.isSafari()||this.isFirefox()))){return -1}var f=/Mac OS X (\d+([\.|_]\d+)*);/,e=f.exec(b);return(e&&e.length>1)?e[1].replace("_",".","g"):-1},isUnsupportedMacOSXVersion:function(){var f=CTXS.Config.pluginAssistant.macOS.minimumSupportedOSVersion;if(!f){return false}var e=this.getMacOSXVersion();if(e==-1){return false}return this.isOlderThan(f,e)},isHtml5ClientSupported:function(h){try{var g=h.split(/;|,/);for(var f=0;f<g.length;f++){if(g[f].trim().length==0){continue}var j=new RegExp(g[f],"i");if(j.test(b)){return true}}}catch(e){}return false}}})();(function(){function c(){return(CTXS.ClientInfo.isWindows()&&(CTXS.ClientInfo.isFirefox()||CTXS.ClientInfo.isChrome()))||(CTXS.ClientInfo.isMacOSX()&&(CTXS.ClientInfo.isSafari()||CTXS.ClientInfo.isFirefox()||CTXS.ClientInfo.isChrome()))}function g(j){if(c()){if(e(null,j)){var i=document.getElementById("wizard-plugindetection");i.innerHTML="<embed type='"+j+"' hidden='true' name='IcaObj' id='IcaObj'></embed>"}}}function e(j,i){var q=true;if(CTXS.ClientInfo.isIE()&&CTXS.ClientInfo.isWindows()){try{var l=new ActiveXObject(j);if(!l){q=false}}catch(m){q=false}}CTXS.trace("plugindetection","isSafari="+CTXS.ClientInfo.isSafari()+", isMacOSX="+CTXS.ClientInfo.isMacOSX());if(c()){CTXS.trace("plugindetection","supported browser");q=false;navigator.plugins.refresh(false);for(var p=0;(!q)&&(p<navigator.plugins.length);p++){var n=navigator.plugins[p];if(n===undefined){continue}var o=n.length;for(var k=0;(!q)&&(k<o);k++){if(n[k].type==i){q=true}}}CTXS.trace("plugindetection","result="+q)}return q}function a(i){if(CTXS.ClientInfo.isIE()&&CTXS.ClientInfo.isWindows()){try{var l=new ActiveXObject(i);if(l!=null){l.Launch=true;var j=l.Launch;if(j){return true}}}catch(k){}return false}return true}function b(j){var i;if(CTXS.ClientInfo.isIE()&&CTXS.ClientInfo.isWindows()){try{var l=new ActiveXObject(j);if(l!=null){i=l.ClientVersion;if(i!=null&&i!=""){return i}}}catch(k){}return null}if(c()){try{i=document.IcaObj.ClientVersion;if(i!=null&&i!=""){return i}}catch(k){}return null}return null}function d(i){if(CTXS.ClientInfo.isIE()&&CTXS.ClientInfo.isWindows()){try{var k=new ActiveXObject(i);return k.IsPassThrough()}catch(j){}return null}if(c()){try{if(document.IcaObj){return document.IcaObj.IsPassThrough()}}catch(j){}return null}return null}var h="application/x-ica",f="Citrix.ICAClient";window.CTXS=window.CTXS||{};CTXS.ICA={init:function(){g(h);this.detected=e(f,h);this.isCorrectZone=a(f);this.version=b(f);this.isPassThrough=d(f)},HTML5_LAUNCH:"HTML5",ICO_LAUNCH:"ICO",ICA_LAUNCH:"ICA",getLaunchMethod:function(){if(CTXS.Html5Client.usingHtml5Client()){return CTXS.ICA.HTML5_LAUNCH}else{if(CTXS.ClientInfo.isIE()&&CTXS.ICA.detected&&CTXS.ICA.isCorrectZone){return CTXS.ICA.ICO_LAUNCH}else{if(CTXS.ICA.detected){return CTXS.ICA.ICA_LAUNCH}}}return CTXS.ICA.ICA_LAUNCH}}})();window.CTXS=$.extend(window.CTXS||{},{LAUNCH_STARTING:0,LAUNCH_SUCCESS:1,LAUNCH_READY:2,LAUNCH_FAILURE:3,SUBSCRIPTION_STARTING:0,SUBSCRIPTION_SUCCESS:1,SUBSCRIPTION_FAILURE:2,SUBSCRIPTION_PENDING:3,SUBSCRIPTION_STATUS:{PENDING:"pending",APPROVED:"approved",DENIED:"denied",SUBSCRIBED:"subscribed",NOTSUBSCRIBED:"unsubscribed"},POWEROFF_STARTING:0,POWEROFF_SUCCESS:1,POWEROFF_FAILURE:2,ASSIGNDESKTOP_STARTING:0,ASSIGNDESKTOP_SUCCESS:1,ASSIGNDESKTOP_FAILURE:2,RESOURCE_DETAILS:{CORE:"Core",APPSHORTCUTS:"AppShortcuts"},APP_SHORTCUTS:{VALIDATION_SUCCESS:"success",VALIDATION_PROMPT:"prompt",VALIDATION_FAILURE:"failure"}});(function(){function b(){var g=CTXS.Config.userInterface.workspaceControl;if(g.enabled=="false"){return false}else{if(CTXS.ICA.getLaunchMethod()==CTXS.ICA.HTML5_LAUNCH){if(CTXS.Config.pluginAssistant.html5.singleTabLaunch=="true"||CTXS.AppShortcuts.isAppShortcutLaunch()){return false}return true}else{if(!CTXS.ClientInfo.isWindows()||(CTXS.ICA.detected&&!CTXS.ICA.isPassThrough&&CTXS.ICA.isCorrectZone)){return true}else{return false}}}}function f(){var h=(CTXS.resources.numStoreResources>0);var i=(CTXS.Config.userInterface.uiViews.showAppsView=="true");var g=b();return g&&h&&i}function d(){var h=CTXS.Config.userInterface.workspaceControl.autoReconnectAtLogon==="true",k=f(),i=CTXS.ICA.isCorrectZone||(CTXS.ICA.getLaunchMethod()==CTXS.ICA.HTML5_LAUNCH),g=!CTXS.AppShortcuts.isAppShortcutLaunch()||CTXS.Config.userInterface.appShortcuts.allowSessionReconnect==="true",j=CTXS.Resources.autoLaunchSingleDesktop();return h&&k&&i&&g&&!j}function e(){var g=CTXS.Config.storeProxy.sessionsProxy.listAvailableURL;CTXS.SessionsServiceClient.listAvailableSessions(g,{resourceTypes:"Citrix.MPS.Application"})}function a(g,h){if(h==null){CTXS.Events.publish(CTXS.Events.workspaceControl.listFailure)}$(h).each(function(j,k){var l={};l.launchurl=CTXS.Config.storeProxy.sessionsProxy.launchURL+"/"+k.SessionId;l.issession=true;$.prepareLaunch(l)});if(h.length>0){var i=CTXS.ICA.getLaunchMethod();if(i==CTXS.ICA.HTML5_LAUNCH){CTXS.popupsEnabled($.localization.string("PopupBlockerReconnectApps"))}}}function c(){CTXS.alertBox($.localization.string("SessionsListFailure"))}CTXS.Events.subscribe(CTXS.Events.workspaceControl.listSuccess,a);CTXS.Events.subscribe(CTXS.Events.workspaceControl.listFailure,c);window.CTXS=window.CTXS||{};CTXS.WorkspaceControl={isAllowed:b,isSessionReconnectAllowed:f,isAutoSessionReconnectAllowed:d,reconnectAppSessions:e}})();(function(){var c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";var h="0";var f="1";var e="z";var k=c.charAt(c.indexOf(e)/2);function g(l){var m=l.length-1;var n=l.charAt(m);if((n===e)||((m==0)&&(i(n)==e))){return l+f}return l.substring(0,m)+i(n)}function j(o,m){var q=o.length;var p=m.length;CTXS.trace("ordermarker","o1="+o+" o2="+m);if(o==m){return o}var n="";for(var t=0;;t++){CTXS.trace("ordermarker","loop i="+t+" l1="+q+" l2="+p);var s;if(t<q){s=o.charAt(t)}else{s=h;n=n+h}var r=(t<p)?m.charAt(t):h;if(s===r){continue}var u=a(s,r);if((u!==r)||(t!==(p-1))){if(t<q){var l=o.substring(0,t)+u;return l}if(t==q){var l=o+u;return l}var l=o+n+u;return l}for(t++;;t++){if(t<q){s=o.charAt(t)}else{s=h}if(s!=e){if(t<q){var l=o.substring(0,t)+a(s,e);return l}if(t==q){var l=o+k;return l}var l=o+n+k;return l}}}}function b(n,m){for(var l=0;;l++){if(n.length===l){if(m.length===l){return 0}return -1}if(m.length===l){return 1}var o=d(n.charAt(l),m.charAt(l));if(o!=0){return o}}}function d(m,l){return c.indexOf(m)-c.indexOf(l)}function i(l){return c.charAt(c.indexOf(l)+1)}function a(o,m){var p=c.indexOf(o);var n=c.indexOf(m);var l=(n-p+1)/2+p;return c.charAt(l)}window.CTXS=window.CTXS||{};CTXS.OrderMarker={zero:h,getNext:g,getBetween:j,compare:b}})();(function(){var c=false,d=370,a=600,b=100;window.CTXS=window.CTXS||{};CTXS.WorkflowManager={approvedApps:[],deniedApps:[],isShowingWorkflowNotification:false,currentMenuItem:null,workflowStartNotification:function(h,g){CTXS.WorkflowManager.isShowingWorkflowNotification=true;var f=[{text:$.localization.string("SendRequest"),isDefault:true,action:function(){if(h!==null){g.animationOffset=h.find("img").offset()}g.subscriptionstatus=CTXS.SUBSCRIPTION_STATUS.PENDING;CTXS.subscribeApp(g);CTXS.WorkflowManager._closeDialog()}},{text:$.localization.string("Cancel"),isCancel:true,action:function(){CTXS.WorkflowManager._closeDialog()}}];var e='<div class="notificationRequestMessageContainer">';e+='<img iconid="'+g.iconid+'" src="'+g.iconurl+'" class="requestNotificationImage" alt="'+g.name+'"></img>';e+="<p id='messagebox-text' class='notificationRequestMessage'>"+$.localization.string("RequestApproval",g.name)+"</p></div>";CTXS.alertBox($(e),f)},_closeDialog:function(){CTXS.alertBox("close");CTXS.WorkflowManager.isShowingWorkflowNotification=false;if(CTXS.WorkflowManager.currentMenuItem!=null){CTXS.WorkflowManager.currentMenuItem.focus();CTXS.WorkflowManager.currentMenuItem=null}},isLaunchableState:function(e){return !(e==CTXS.SUBSCRIPTION_STATUS.APPROVED||e==CTXS.SUBSCRIPTION_STATUS.PENDING||e==CTXS.SUBSCRIPTION_STATUS.DENIED||e==CTXS.SUBSCRIPTION_STATUS.NOTSUBSCRIBED)},isVisibleState:function(e){return e==CTXS.SUBSCRIPTION_STATUS.APPROVED||e==CTXS.SUBSCRIPTION_STATUS.PENDING||e==CTXS.SUBSCRIPTION_STATUS.DENIED||e==CTXS.SUBSCRIPTION_STATUS.SUBSCRIBED},isWorkflowState:function(e){return e==CTXS.SUBSCRIPTION_STATUS.APPROVED||e==CTXS.SUBSCRIPTION_STATUS.PENDING||e==CTXS.SUBSCRIPTION_STATUS.DENIED},displayWorkflowStatusNotification:function(){if(CTXS.WorkflowManager.approvedApps.length!==0&&CTXS.WorkflowManager.deniedApps.length!==0){CTXS.WorkflowManager._workflowCombinedNotification()}else{if(CTXS.WorkflowManager.approvedApps.length!==0){CTXS.WorkflowManager._workflowApprovedNotification()}else{if(CTXS.WorkflowManager.deniedApps.length!==0){CTXS.WorkflowManager._workflowDeniedNotification()}}}},_workflowCombinedNotification:function(){var e=[{text:$.localization.string("SyncNow"),isDefault:true,action:function(){for(var g=0;g<CTXS.WorkflowManager.approvedApps.length;g++){CTXS.ResourcesClient.subscription(CTXS.WorkflowManager.approvedApps[g],"subscribe")}for(var f=0;f<CTXS.WorkflowManager.deniedApps.length;f++){CTXS.ResourcesClient.subscription(CTXS.WorkflowManager.deniedApps[f],"unsubscribe")}CTXS.WorkflowManager.approvedApps=[];CTXS.WorkflowManager.deniedApps=[];CTXS.alertBox("close",[],{onclose:CTXS.WorkflowManager._OnCloseCallbackFunction})}}];c=true;CTXS.alertBox($.localization.string("ApplicationsRequestedApprovedOrDenied"),e,{callbackfunction:CTXS.WorkflowManager._combinedNotificationCallbackFunction})},_workflowApprovedNotification:function(){var e=[{text:$.localization.string("Add"),isDefault:true,action:function(){for(var f=0;f<CTXS.WorkflowManager.approvedApps.length;f++){CTXS.ResourcesClient.subscription(CTXS.WorkflowManager.approvedApps[f],"subscribe")}CTXS.alertBox("close",[],{onclose:CTXS.WorkflowManager._OnCloseCallbackFunction});CTXS.WorkflowManager.approvedApps=[]}}];c=true;CTXS.alertBox($.localization.string("ApplicationsRequestedApproved"),e,{callbackfunction:CTXS.WorkflowManager._approvedNotificationCallbackFunction})},workflowApprovedNotificationAppShortcuts:function(h,e,f){var g=[{text:$.localization.string("OK"),isDefault:true,action:function(){CTXS.ResourcesClient.subscription(h,"subscribe");var i=CTXS.WorkflowManager.approvedApps.indexOf(h);CTXS.WorkflowManager.approvedApps.splice(i,1);CTXS.alertBox("close",[],{onclose:CTXS.WorkflowManager._OnCloseCallbackFunction});CTXS.ResourcesClient.validateAppShortcutLaunch(h,e,f)}}];c=true;CTXS.alertBox($.localization.string("AppRequestApprovedWithName",h.displayName),g)},workflowDeniedNotificationAppShortcuts:function(f){var e=[{text:$.localization.string("OK"),isDefault:true,action:function(){CTXS.ResourcesClient.subscription(f,"unsubscribe");var g=CTXS.WorkflowManager.deniedApps.indexOf(f);CTXS.WorkflowManager.deniedApps.splice(g,1);CTXS.alertBox("close",[],{onclose:CTXS.WorkflowManager._OnCloseCallbackFunction})}}];c=true;CTXS.alertBox($.localization.string("AppRequestDeniedWithName",f.displayName),e)},_workflowDeniedNotification:function(){var e=[{text:$.localization.string("Remove"),isDefault:true,action:function(){for(var f=0;f<CTXS.WorkflowManager.deniedApps.length;f++){CTXS.ResourcesClient.subscription(CTXS.WorkflowManager.deniedApps[f],"unsubscribe")}CTXS.WorkflowManager.deniedApps=[];CTXS.alertBox("close",[],{onclose:CTXS.WorkflowManager._OnCloseCallbackFunction})}}];c=true;CTXS.alertBox($.localization.string("ApplicationsRequestedDenied"),e,{callbackfunction:CTXS.WorkflowManager._deniedNotificationCallbackFunction})},_showDetails:function(g,f){$("#workflowDetails").toggle();var e=$(".dialogBoxOverlay .cloud");var h=$(".detailsLink");if(h.hasClass("moreInformation")){h.removeClass("moreInformation").addClass("lessInformation").text($.localization.string("LessInformation"))}else{h.removeClass("lessInformation").addClass("moreInformation").text($.localization.string("MoreInformation"))}if(g>2||f){e.toggleClass("extended");if(e.hasClass("extended")){e.height(a);$("#workflowDetails").ctxsUpdateScrollPane().ctxsScrollToTop()}}else{if(!e.hasClass("extended")){e.height(d)}}$("#workflowDetails .appContainingDiv p").ctxsReapplyText();return false},_drawShowDetailsLink:function(f,g,e){$(".dialogBoxOverlay .ctxsui-messagebox").css("top","-="+b);$(".dialogBoxOverlay .cloud").css("top","-="+b);var h=$('<div class="ctxsWorkflowNotification"></div>');h.append('<div class="dottedseparator"/>');h.append('<a class="detailsLink moreInformation" href="#">'+$.localization.string("MoreInformation")+"</a>");h.append('<div id="workflowDetails"></div>');h.appendTo(f);$(".detailsLink").click(function(){CTXS.WorkflowManager._showDetails(g,e)})},_drawNotificationDetails:function(g){for(var e=0;e<g.length;e++){var f=$("<div></div>");var h=$('<div class="appContainingDiv"></div>');h.append('<img iconid="'+g[e].iconid+'" src="'+g[e].iconurl+'" class="workflowAppDetailsIcon" alt="'+g[e].name+'"></img>');h.append('<p role="alert" class="workflowAppDetailsText">'+g[e].displayName+"</p>");h.appendTo(f);f.appendTo($("#workflowDetails"))}},_approvedNotificationCallbackFunction:function(e){CTXS.WorkflowManager._drawShowDetailsLink(e,CTXS.WorkflowManager.approvedApps.length,false);CTXS.WorkflowManager._drawNotificationDetails(CTXS.WorkflowManager.approvedApps);$("#workflowDetails").ctxsCreateScrollPane()},_deniedNotificationCallbackFunction:function(e){CTXS.WorkflowManager._drawShowDetailsLink(e,CTXS.WorkflowManager.deniedApps.length,false);CTXS.WorkflowManager._drawNotificationDetails(CTXS.WorkflowManager.deniedApps);$("#workflowDetails").ctxsCreateScrollPane()},_combinedNotificationCallbackFunction:function(f){CTXS.WorkflowManager._drawShowDetailsLink(f,CTXS.WorkflowManager.approvedApps.length+CTXS.WorkflowManager.deniedApps.length,true);var g=$('<div id="approvedApps"></div>');g.append("<p>"+$.localization.string("ApplicationsAdded")+"</p>");g.appendTo($("#workflowDetails"));CTXS.WorkflowManager._drawNotificationDetails(CTXS.WorkflowManager.approvedApps);var e=$('<div id="deniedApps"></div>');e.append("<p>"+$.localization.string("ApplicationsRemoved")+"</p>");e.appendTo($("#workflowDetails"));CTXS.WorkflowManager._drawNotificationDetails(CTXS.WorkflowManager.deniedApps);$("#workflowDetails").ctxsCreateScrollPane()},_OnCloseCallbackFunction:function(f){var e=f.find(".cloud");if(c){e.removeClass("extended");e.css("top","+="+b);e.height(d);c=false}},subscriptionImage:function(e){var f="transparent.gif";if(CTXS.WorkflowManager.isVisibleState(e)){if(e==CTXS.SUBSCRIPTION_STATUS.SUBSCRIBED||e==CTXS.SUBSCRIPTION_STATUS.APPROVED){f="Added_checkMark.png"}else{if(e==CTXS.SUBSCRIPTION_STATUS.DENIED){f="accessDenied.png"}else{if(e==CTXS.SUBSCRIPTION_STATUS.PENDING){f="pending.png"}}}}return f}}})();(function(){window.CTXS=window.CTXS||{};CTXS.Resources=$.extend(CTXS.Resources||{},{prepareResources:function(h){CTXS.resources=h.resources;CTXS.resources.subscriptionsEnabled=h.subscriptionsEnabled;CTXS.resources.highestPosition=CTXS.OrderMarker.zero;CTXS.resources.numStoreResources=0;CTXS.resources.subscribedApps=[];CTXS.resources.numDesktops=0;var f=[],d;for(d=0;d<CTXS.resources.length;d++){if(CTXS.resources[d].isdesktop){f.push(CTXS.resources[d])}}this._addParenthesesToDesktopGroups(f);var a=function(){return CTXS.IconsLoader.loadedIcons[this.iconid]?this.iconurl:"uiareas/Store/media/missing1.png"};for(d=0;d<CTXS.resources.length;d++){var b=CTXS.resources[d];b.index=d;b.encodedName=CTXS.encodeHtmlForAttr(b.name);b.encodedDescription=CTXS.encodeHtmlForAttr(b.description);if(CTXS.resources[d].isdesktop){++CTXS.resources.numDesktops;CTXS.resources.desktopIndex=d}var g=CTXS.truncateToFit(b.hasParenthesis?b.displayNameDesktopTitle:b.name,176,1,b.hasParenthesis);b.displayNameTruncated=g!=b.name;b.displayName=b.displayNameTruncated?CTXS.encodeHtml(g):b.encodedName;b.displayNameBelt=CTXS.truncateToFit(b.displayName,108,2,b.hasParenthesis);if(b.clienttypes){for(var c=0;c<b.clienttypes.length;c++){if(b.clienttypes[c].indexOf("application/")==0){b.ismobileapp=true}}}if(CTXS.WorkflowManager.isVisibleState(b.subscriptionstatus)){b.position=b.position||CTXS.OrderMarker.zero;if(CTXS.OrderMarker.compare(b.position,CTXS.resources.highestPosition)>0){CTXS.resources.highestPosition=b.position}}if(CTXS.Resources._isShownInStore(b)){++CTXS.resources.numStoreResources;b.showInStore=true}var k=b.encodedName.toLowerCase()+" "+b.encodedDescription.toLowerCase();b.tag=k.replace(/\u3000/g," ");b.iconid=CTXS.getIconId(b.iconurl);b.getIconPath=a;if(b.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.APPROVED){CTXS.WorkflowManager.approvedApps.push(b)}else{if(b.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.DENIED){CTXS.WorkflowManager.deniedApps.push(b)}}var e=b.requiresworkflow&&!CTXS.resources.subscriptionsEnabled&&!(b.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.SUBSCRIBED);if(!e){if(CTXS.WorkflowManager.isVisibleState(b.subscriptionstatus)&&!b.isdesktop){CTXS.resources.subscribedApps.push(b)}}}},_isShownInStore:function(a){if(!CTXS.resources.subscriptionsEnabled&&a.requiresworkflow){return false}return(!a.isdesktop&&CTXS.canLaunchResource(a))||CTXS.WorkflowManager.isWorkflowState(a.subscriptionstatus)},_addParenthesesToDesktopGroups:function(b){var c=[],a;for(a=0;a<b.length;a++){if(c[b[a].name]===undefined){c[b[a].name]=1}else{c[b[a].name]++}}for(a=0;a<b.length;a++){if(c[b[a].name]>1){b[a].hasParenthesis=true}else{b[a].hasParenthesis=false}}for(a=b.length-1;a>=0;a--){if(b[a].hasParenthesis){b[a].displayNameDesktopTitle=b[a].name+" ("+c[b[a].name]--+")"}else{b[a].displayNameDesktopTitle=b[a].name}}},autoLaunchSingleDesktop:function(){var d=(CTXS.Config.userInterface.autoLaunchDesktop=="true"),a=CTXS.ICA.isCorrectZone,c=CTXS.resources.numDesktops==1&&!CTXS.resources[CTXS.resources.desktopIndex].disabled,b=CTXS.ICA.isPassThrough,e=CTXS.AppShortcuts.isAppShortcutLaunch();return d&&a&&c&&!b&&!e},resourceJson2Html:function(d){var e="";e+='<div folder="'+d.path+'" ';e+='name="'+d.encodedName+'" ';e+='id="'+d.index+'" ';e+='class="resource';if(d.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.SUBSCRIBED){e+=" subscribed"}if(d.recommended){e+=" recommended"}var c=d.displayNameTruncated;e+='"';if(d.encodedDescription||c){var b="";if(c){b=d.encodedName}if(d.encodedDescription){if(c){b+=". \n"}b+=d.encodedDescription}e+=' title="'+b+'"'}e+=">";e+='<div class="resource-icon">';e+='<img src="'+d.getIconPath()+'" iconid="'+d.iconid+'"/>';e+="</div>";e+='<div class="resource-text">';e+='<a class="resource-name" role="menuitem" href="#">';e+=d.displayName;e+="</a></div>";var a="uiareas/Store/media/";e+='<img class="subscription-icon" src="'+a+CTXS.WorkflowManager.subscriptionImage(d.subscriptionstatus)+'" alt=""/>';return e+"</div>"}})})();(function(){window.CTXS=window.CTXS||{};CTXS.Resources=$.extend(CTXS.Resources||{},{renderResources:function(a,g){var h,b,i,d;CTXS.trace("resourcerendering","renderResources called with the resources json");if(g){CTXS.Resources.prepareResources(g)}if(CTXS.AppShortcuts.isShortcutViewModeEnabled()){CTXS.Resources.populateUserName();CTXS.Resources.setUpShortcutViewMode();return}if(typeof CTXS.Application.postLoginHook=="function"&&CTXS.getCookie(CTXS.COOKIE_POST_LOGIN_SCRIPT_DONE)!="yes"){CTXS.setCookie(CTXS.COOKIE_POST_LOGIN_SCRIPT_DONE,"yes",CTXS.Location.pathname);CTXS.Application.postLoginHook();return}$("#resources-categoriesmenu").ctxsCategoriesMenu();$("#myapps-pane").ctxsMyApps().ctxsUnifyHoverFocus({hoverClass:"hovered",exclude:"a.hoverable"});$("#mydesktops-pane").ctxsMyDesktops().ctxsUnifyHoverFocus({hoverClass:"hovered"});$("#resources-searcharea").ctxsSearch();$("#header-username").ctxsUserMenu();$("#resources-container").ctxsMyAppsContextMenu();CTXS.Resources.populateUserName();h=(CTXS.Config.userInterface.uiViews.showAppsView=="true");b=(CTXS.Config.userInterface.uiViews.showDesktopsView=="true");if(h==b){h=(CTXS.resources.numStoreResources>0)||(CTXS.resources.subscribedApps.length>0);b=(CTXS.resources.numDesktops>0)||!h}var c=CTXS.AppShortcuts.getAppShortcutResource();if(b){if(h){var e=null;if(c!=null){e=c.isdesktop?CTXS.DESKTOPS_VIEW:CTXS.APPS_VIEW}$("#resources-switcher").ctxsSwitcher({initialView:e});$("#skiplinks").ctxsSkipLinks({initialView:e})}else{$("#resources-searcharea").hide();$("#resources-myapps, #resources-navigationbar").hide();$("#resources-mydesktops").show()}}else{$("#resources-mydesktops").hide();if(CTXS.Resources.isStoreEmpty()){$("#resources-navigationbar").hide()}}CTXS.ImagesPreloader.preloadCategory(CTXS.ImagesPreloader.categories.store,function(){CTXS.Application.$paneResources.ctxsDisplayPane();$(window).trigger("resize");if(!$("#alertbox .cloud").is(":visible")){CTXS.Events.publish(CTXS.Events.resources.relinquishFocus)}CTXS.IconsLoader.loadIcons(CTXS.resources);if(CTXS.AppShortcuts.isAppShortcutLaunch()){CTXS.AppShortcuts.validateAppShortcutLaunch()}else{if(h&&!CTXS.resources.subscriptionsEnabled){CTXS.displayDatabaseWarning()}else{CTXS.WorkflowManager.displayWorkflowStatusNotification()}}});if(b&&CTXS.Resources.autoLaunchSingleDesktop()){i=CTXS.resources[CTXS.resources.desktopIndex];d=CTXS.getCookie(CTXS.COOKIE_DESKTOP_AUTO_LAUNCH_DONE);if(d!="yes"){CTXS.setCookie(CTXS.COOKIE_DESKTOP_AUTO_LAUNCH_DONE,"yes",CTXS.Location.pathname);CTXS.launchResource(i,true);var f=CTXS.ICA.getLaunchMethod();if(f==CTXS.ICA.HTML5_LAUNCH){CTXS.popupsEnabled($.localization.string("PopupBlockerDesktopAutoLaunch"))}}}if(CTXS.WorkspaceControl.isAutoSessionReconnectAllowed()){CTXS.WorkspaceControl.reconnectAppSessions()}},populateUserName:function(){CTXS.Events.subscribe(CTXS.Events.resources.usernameSuccess,function(a,b){b=CTXS.truncateToFit(b,205,1);$("#header-username").append(b)});CTXS.AuthClient.getUsername(CTXS.Config.authManager.getUsernameURL)},setUpShortcutViewMode:function(){$("#resources-searcharea").hide();$("#resources-myapps, #resources-navigationbar").hide();$("#resources-mydesktops").hide();$("#resources-footer").hide();$("#resources-appshortcuts").show();$("#appshortcuts-pane").ctxsAppShortcutsView();$("#header-username").ctxsUserMenu({showActivateReceiver:false,showConnect:false,showDisconnect:false,logoffAction:null});CTXS.Application.$paneResources.ctxsDisplayPane();$(window).trigger("resize");CTXS.IconsLoader.loadIcons(CTXS.resources);$("#appshortcuts-pane").ctxsAppShortcutsView("focusOnFirstShortcutUrl")},renderFailure:function(){CTXS.alertBox($.localization.string("ListFailure"));CTXS.Events.publish(CTXS.Events.error.terminalState)},nextPosition:function(){var a=CTXS.OrderMarker.getNext(CTXS.resources.highestPosition);return(CTXS.resources.highestPosition=a)},isStoreEmpty:function(){return CTXS.resources.numStoreResources==0},goToStore:function(){var a=$("#resources-categoriesmenu");if(a.is(":visible")){a.ctxsCategoriesMenu("hide");return false}else{a.ctxsCategoriesMenu("show");return true}},resize:function(){if(CTXS.AppShortcuts.isShortcutViewModeEnabled()){CTXS.Resources.resizeShortcutViewMode();return}var k=$("#resources"),n=$("#resources-container"),o=$("#resources-myapps"),j=$("#resources-mydesktops"),i=$("#resources-navigationbar"),a=$("#resources-header"),h=$("#resources-footer"),c=k.width()-i.width()-1,m=k.width(),e=30,g=10,l=250+e+g,d=Math.max(l,k.height()-a.height()-h.height()),f=d-e-g,b=f;n.height(d);o.add(j).css({"margin-top":e+"px","margin-bottom":g+"px"});o.width(c);o.height(f);j.width(m);j.height(b);$("#myapps-pane").ctxsMyApps("resize",c,f);$("#mydesktops-pane").ctxsMyDesktops("resize",m,b);$("#resources-categoriesmenu").ctxsCategoriesMenu("resize",d)},resizeShortcutViewMode:function(){var e=$("#resources"),a=$("#resources-container"),f=$("#resources-appshortcuts"),c=$("#resources-header"),b=e.width(),d=e.height()-c.height();a.height(d);$("#appshortcuts-pane").ctxsAppShortcutsView("resize",b,d)},handleKeyDown:function(a){if(a.keyCode==CTXS.KEY_TAB){$(".jspScrollable").removeClass("hide-outline")}},handleEscapeKey:function(a){if(a.which==CTXS.KEY_ESCAPE){$(document).click();CTXS.Events.publish(CTXS.Events.resources.relinquishFocus)}}})})();$(document).ready(function(){CTXS.Events.subscribe(CTXS.Events.resources.listSuccess,CTXS.Resources.renderResources);CTXS.Events.subscribe(CTXS.Events.resources.listFailure,CTXS.Resources.renderFailure);$(window).resize(CTXS.Resources.resize);var a=function(){var b=CTXS.Resources.goToStore();if(b){$(".allapps-button").eq(0).find(".categoryname").focus()}};$(".storebutton").click(function(b){$(document).click();a();return false});$(".storebutton").keydown(function(b){if(b.keyCode==CTXS.KEY_ENTER||b.keyCode==CTXS.KEY_RIGHT||b.keyCode==CTXS.KEY_DOWN||b.keyCode==CTXS.KEY_UP){a();return false}});$(document).keydown(CTXS.Resources.handleKeyDown);$(document).keyup(CTXS.Resources.handleEscapeKey);$("body").on("mouseenter focusin","a.hoverable",function(c){var b=$(this).find("img:first");if(b.attr("data-normal")===undefined){b.attr("data-normal",b.attr("src"))}b.attr("src",b.attr("data-hover"))});$("body").on("mouseleave focusout","a.hoverable",function(c){var b=$(this).find("img:first");b.attr("src",b.attr("data-normal"))})});(function(a){CTXS.Events.subscribe(CTXS.Events.resources.subscriptionStatus,function(e,f){var g=f.app,b=a("#"+g.index),d=b.find(".subscription-icon");CTXS.trace("event","subscription status, $row="+b+" status="+f.status);if(f.status==CTXS.SUBSCRIPTION_STARTING){b.addClass("subscription-waiting")}else{if(f.status==CTXS.SUBSCRIPTION_PENDING){b.removeClass("subscription-waiting");b.removeClass("subscribed")}else{if(f.status==CTXS.SUBSCRIPTION_SUCCESS){b.removeClass("subscription-waiting");if(g.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.SUBSCRIBED){b.addClass("subscribed")}else{if(g.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.NOTSUBSCRIBED){b.removeClass("subscribed")}}}else{if(f.status==CTXS.SUBSCRIPTION_FAILURE){b.removeClass("subscription-waiting");if(f.operation=="subscribe"){b.addClass("subscribed");g.subscribeFaked=true}else{b.removeClass("subscribed");g.unsubscribeFaked=true}CTXS.displayDatabaseWarning()}}}}if(f.status!=CTXS.SUBSCRIPTION_STARTING){var c="uiareas/Store/media/";d.attr("src",c+CTXS.WorkflowManager.subscriptionImage(g.subscriptionstatus))}});CTXS.Events.subscribe(CTXS.Events.resources.updatePositionFailure,function(){CTXS.displayDatabaseWarning()});CTXS.Events.subscribe(CTXS.Events.resources.launchStatus,function(e,f){var c=f.res,d=a("#"+c.index),b=f.status;if(b==CTXS.LAUNCH_STARTING){d.addClass("launch-waiting").removeClass("launch-ready")}else{if((b==CTXS.LAUNCH_SUCCESS)||(b==CTXS.LAUNCH_FAILURE)){d.removeClass("launch-waiting")}else{if(b==CTXS.LAUNCH_READY){d.addClass("launch-ready")}}}});CTXS.subscribeApp=function(c){var b="subscribe";c.position=CTXS.Resources.nextPosition();CTXS.Events.publish(CTXS.Events.resources.subscriptionStatus,{status:CTXS.SUBSCRIPTION_STARTING,app:c,operation:b});if(c.unsubscribeFaked){c.subscriptionstatus=CTXS.SUBSCRIPTION_STATUS.SUBSCRIBED;c.unsubscribeFaked=false;CTXS.Events.publish(CTXS.Events.resources.subscriptionStatus,{status:CTXS.SUBSCRIPTION_SUCCESS,app:c,operation:b})}else{CTXS.ResourcesClient.subscription(c,b)}};CTXS.unsubscribeApp=function(c){var b="unsubscribe";CTXS.Events.publish(CTXS.Events.resources.subscriptionStatus,{status:CTXS.SUBSCRIPTION_STARTING,app:c,operation:b});if(c.subscribeFaked){c.subscriptionstatus=CTXS.SUBSCRIPTION_STATUS.NOTSUBSCRIBED;c.subscribeFaked=false;CTXS.Events.publish(CTXS.Events.resources.subscriptionStatus,{status:CTXS.SUBSCRIPTION_SUCCESS,app:c,operation:b})}else{CTXS.ResourcesClient.subscription(c,b)}}})(jQuery);(function(){var b="a_";var a=new RegExp("^"+b);var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890-:.";window.CTXS=$.extend(window.CTXS||{},{encodeAppId:function(j){var d=b;var g=j.length;for(var e=0;e<g;e++){var f=j.charAt(e);if(c.indexOf(f)>=0){d+=f}else{d+="_";var h=f.charCodeAt(0).toString(16);while(h.length<4){h="0"+h}d+=h}}return d},encodeJQuerySelector:function(d){return d.replace(/%/g,"\\%").replace(/\./g,"\\.")},decodeAppId:function(h){var d="";if(!h.match(a)){throw ("Missing id prefix")}for(var e=b.length;e<h.length;e++){var f=h.charAt(e);if(f=="_"){var j=h.substring(e+1,e+5);var g=parseInt(j,16);d+=String.fromCharCode(g);e+=4}else{d+=f}}return d}})})();(function(b){var a="_all",d="_recommended",f=[],c=[],e=false;b.widget("ctxs.ctxsCategoriesMenu",{URL_FOLDER_CLOSED:"uiareas/Store/media/store_category_eastarrow1.png",URL_FOLDER_CLOSED_HOVER:"uiareas/Store/media/store_category_eastarrow_hover1.png",URL_FOLDER_OPENED:"uiareas/Store/media/store_category_southarrow1.png",URL_FOLDER_OPENED_HOVER:"uiareas/Store/media/store_category_southarrow_hover1.png",_create:function(){var g=this;g._createCategoriesMenu();g._createAppsMenu();g._registerCategoriesEvents();g._registerAppsEvents();g._registerArrowsEvents();g.element.add("#resources-appsmenu").on("keyup.contextMenu",function(h){if(h.keyCode==CTXS.KEY_ESCAPE){g.hide();b(".storebutton").focus();return false}});if(b("#allapps-picker").find(".recommended").length==0){g.element.find(".featured-button").hide()}},_createCategoriesMenu:function(){var h=this,i='<div class="categoriesmenu-inner"><div class="navigation-subheading menubutton menu-normalbutton allapps-button"><a class="categoryname" role="menuitem" aria-haspopup="true" href="#" onclick="return false;">'+b.localization.string("AllApps")+'</a></div><div class="navigation-subheading menubutton menu-normalbutton featured-button"><a class="categoryname" role="menuitem" aria-haspopup="true" href="#" onclick="return false;">'+b.localization.string("Featured")+'</a></div><div><div class="folderListContainer"></div></div></div>';h.element.html(b(i));h.element.find(".categoriesmenu-inner").ctxsCreateScrollPane();h._doCategoriesTree(this.element.find(".folderListContainer"));var g=h.element.find(".foldericon");g.addClass("foldericon-closed")},_createAppsMenu:function(){var g=this,l='<div id="resources-appsmenu"><div id="allapps-picker"></div></div>',j="";b(l).insertAfter(g.element);b("#resources-appsmenu").ctxsCreateScrollPane();for(var h=0;h<CTXS.resources.length;h++){var k=CTXS.resources[h];if(k.showInStore){j+=CTXS.Resources.resourceJson2Html(k)}}b("#allapps-picker").html(j).on("click",".resource",function(m){var i=b(this),n=g._getAppFromRow(i);if(i.hasClass("launch-waiting")||i.hasClass("subscription-waiting")){return}if(CTXS.WorkflowManager.isWorkflowState(n.subscriptionstatus)){return}if(i.hasClass("subscribed")){CTXS.launchResource(n)}else{if(n.requiresworkflow){CTXS.WorkflowManager.currentMenuItem=i;CTXS.WorkflowManager.workflowStartNotification(i,n)}else{n.animationOffset=i.find(".resource-icon img").offset();CTXS.subscribeApp(n)}}m.preventDefault()}).ctxsResourceFilter()},_getAppFromRow:function(g){var h=g[0].id;return CTXS.resources[h]},_scrollIntoView:function(n){var k=n[0];if(!k){return}var g=40,h=-10,o=this.element,m=o.scrollTop(),j=k.offsetTop,l=m+o.height(),i=j+n.height();if(j-g<m){o.scrollTop(j-g)}else{if(i+h>l){o.scrollTop(i-o.height()+h)}}},_closeAllFolders:function(){var g=this.element.find(".foldericon-opened");g.removeClass("foldericon-opened").addClass("foldericon-closed").attr("src",this.URL_FOLDER_CLOSED).closest("li").children("ul").hide()},_expandParents:function(i){CTXS.trace("categories","_expandParents "+i);var g=this;var h=this.element.find(".apps-category").filter(function(){var k=b(this).attr("path");var j=(i.substr(0,k.length)==k&&i!=k);if(j){CTXS.trace("categories","OPEN "+k)}return j});h.each(function(){b(this).find(".foldericon-closed").removeClass("foldericon-closed").addClass("foldericon-opened").attr("src",g.URL_FOLDER_OPENED).closest("li").children("ul").show()})},_showAppsMenu:function(g){if(e){return}b("#resources-appsmenu").show().ctxsScrollToTop();if(g==a){CTXS.Events.publish(CTXS.Events.resources.filter,{category:g})}else{if(g==d){CTXS.Events.publish(CTXS.Events.resources.filter,{recommended:1})}else{CTXS.Events.publish(CTXS.Events.resources.filter,{folder:g})}}this._highlightSelectedCategory(g);this._updateVisibleApps();b("#resources-categoriesmenu, #resources-appsmenu").ctxsUnbindFocusWithin().ctxsBindFocusWithin();this.resize()},_registerCategoriesEvents:function(){var h=this,g=b("#resources-categoriesmenu");g.on("keydown",".categoryname",function(l){var m=b.inArray(b(".categoryname.active")[0],f);if(l.keyCode==CTXS.KEY_UP){if(m!=0){h._removeActiveElementSelection();b(f[m-1]).addClass("active").focus();if(m==1){b(".categoriesmenu-inner").ctxsScrollToTop()}}}else{if(l.keyCode==CTXS.KEY_DOWN){if(m!=f.length-1){h._removeActiveElementSelection();b(f[m+1]).focus()}}else{if(l.keyCode==CTXS.KEY_RIGHT){var k=b(".itemclicked");var i=k.find(">div").attr("path");var j=b("#resources-categoriesmenu a.active");if((i!=undefined&&i===j.parent().attr("path"))||k.text()===j.text()){h._removeActiveElementSelection();b(c[0]).parent().parent().addClass("active");b(c[0]).focus()}else{b(f[m]).click()}}else{if(l.keyCode==CTXS.KEY_LEFT){h.hide();b(".storebutton").eq(0).focus()}}}}});g.on("click",".featured-button",function(){h._showAppsMenu(d)});g.on("click",".allapps-button",function(){h._showAppsMenu(a)});g.on("click",".allapps-tree .categoryname",function(){if(e){return}var k=b(this),j=k.parent(),l=j.closest("li"),i=j.attr("path");CTXS.trace("categories","folder "+i);l.addClass("itemclicked");h._showAppsMenu(i);b(".categoriesmenu-inner").ctxsUpdateScrollPane();k.focus()});g.on("hover",".categoryname",function(){h._removeActiveElementSelection();b(this).addClass("active").focus()});g.on("focus",".categoryname",function(){h._removeActiveElementSelection();b(this).addClass("active")});g.on("blur",".categoryname:last,.categoryname:first",function(){b(this).removeClass("active")});g.on("focus",".categoryname:first",function(){b(".categoriesmenu-inner").ctxsScrollToTop()})},_registerArrowsEvents:function(){var h=this,g=b("#resources-categoriesmenu");g.on("keydown",".arrow",function(l){if(l.keyCode==CTXS.KEY_UP||l.keyCode==CTXS.KEY_DOWN||l.keyCode==CTXS.KEY_LEFT){b(document.activeElement).prev().focus()}else{if(l.keyCode==CTXS.KEY_RIGHT){if(e){return}var k=b(".itemclicked");var i=k.find(">div").attr("path");var n=b(this).parent().attr("path");if(i!=undefined&&i===n){h._removeActiveElementSelection();b(c[0]).parent().parent().addClass("active");b(c[0]).focus()}else{var m=b(this).parent(),o=m.closest("li"),j=m.attr("path");CTXS.trace("categories","folder "+j);o.addClass("itemclicked");h._showAppsMenu(j);b(".categoriesmenu-inner").ctxsUpdateScrollPane()}}}});g.on("click",".arrow",function(j){var k=b(this),i=k.closest(".menubutton").attr("path"),m=k.find(".foldericon"),l=k.closest("li");if(m.hasClass("foldericon-closed")){h._showAppsMenu(i);h._toggleFolder(m.get(0))}else{l.addClass("itemclicked");h._showAppsMenu(i);m.attr("src",h.URL_FOLDER_CLOSED_HOVER)}b(".categoriesmenu-inner").ctxsUpdateScrollPane();k.focus();j.preventDefault()});g.on("mouseleave",".arrow",function(){b(this).find(".foldericon").blur()});g.on("mouseenter",".arrow",function(){b(this).find(".foldericon").focus()});g.on("focus",".arrow",function(){h._removeActiveElementSelection();var j=b(this).find(".foldericon"),i=(j.hasClass("foldericon-closed")?h.URL_FOLDER_CLOSED_HOVER:h.URL_FOLDER_OPENED_HOVER);j.attr("src",i)});g.on("blur",".arrow",function(){var j=b(this).find(".foldericon"),i=(j.hasClass("foldericon-closed")?h.URL_FOLDER_CLOSED:h.URL_FOLDER_OPENED);j.attr("src",i)})},_registerAppsEvents:function(){var h=this,g=b("#allapps-picker");g.on("keydown",".resource",function(k){var j=b.inArray(b(".resource.active").find(".resource-name")[0],c);var i;if(k.keyCode==CTXS.KEY_UP){if(j!=0){h._removeActiveElementSelection();i=b(c[j-1]);i.focus();i.closest("resource").addClass("active")}}else{if(k.keyCode==CTXS.KEY_DOWN){if(j!=c.length-1){h._removeActiveElementSelection();i=b(c[j+1]);i.focus();i.closest("resource").addClass("active")}}else{if(k.keyCode==CTXS.KEY_LEFT){h._removeActiveElementSelection();b(".itemclicked").find(".categoryname:first").addClass("active").focus()}}}});g.on("hover",".resource",function(){if(!CTXS.WorkflowManager.isShowingWorkflowNotification){h._removeActiveElementSelection();b(this).addClass("active").find(".resource-name").focus()}});g.on("focus",".resource",function(){h._removeActiveElementSelection();b(this).addClass("active")});g.on("blur","#allapps-picker .resource:visible:last, #allapps-picker .resource:visible:first",function(){b(this).removeClass("active")});g.on("focus",".resource-name:visible:first",function(){b("#resources-appsmenu").ctxsScrollToTop()})},_removeActiveElementSelection:function(){b(".resource.active").removeClass("active");b(".categoryname.active").removeClass("active")},_doCategoriesTree:function(p){var r=this,j=CTXS.resources,q=p.html('<ul class="allapps-tree"></ul>'),l=0,m;var n=[];for(m=0;m<j.length;m++){var o=j[m];if(!o.showInStore){continue}var h=o.path;if((h!=null)&&(h.length>0)&&(jQuery.inArray(h,n)==-1)){n.push(h)}}n.sort().reverse();for(m=0;m<n.length;m++){g(n[m])}var k=b("li",q).has("ul");k.children("div").addClass("innernode").children(".arrow").children(".foldericon-placeholder").addClass("foldericon").addClass("foldericon-closed").removeClass("foldericon-placeholder");b(".foldericon-placeholder").each(function(){b(this).parent().remove()});b(".foldericon-closed",q).closest("li").find("ul").hide();function g(A){var v,w,F;if(A==="\\"){w=CTXS.encodeAppId("ctxsAllApps");F=b.localization.string("AllApps");if(q.find("#"+w).length===0){v=q.children("ul");v.append('<li id="'+w+'"><div class="allapps-button topfolder navigation-subheading menubutton menu-normalbutton" path="'+A+'"><img class="foldericon-placeholder _ctxsalt_ClickToExpandFolder"/><span class="categoryname">'+F+"</span></div></li>")}}else{var x=A;if(A.lastIndexOf("\\")===A.length-1){x=A.substr(0,A.length-1)}w=CTXS.encodeAppId("ctxsAllApps"+x);var H=CTXS.encodeJQuerySelector(w);if(q.find("#"+H).length===0){F=x.substr(x.lastIndexOf("\\")+1);var B=x.substr(0,x.lastIndexOf("\\"));var C=CTXS.encodeJQuerySelector(CTXS.encodeAppId("ctxsAllApps"+B));v=q.find("#"+C);if(v.length===0){g(x.substr(0,x.lastIndexOf("\\")+1));v=q.find("#"+C)}if(v.children("ul").length==0){v.append("<ul></ul>")}var i=x.split("\\").length;if(i>l){l=i}var t=v.children("ul").children("li").first();while(t.length>0){if(CTXS.compareCategoryName(F,t.find(".categoryname").get(0).innerHTML)<0){break}t=t.next()}var y="",G="",E=225;if(i>2){y=" folder";G='<img src="uiareas/Store/media/icon_folder_padding_tweak.png" alt=""/>',E=203}var s=CTXS.truncateToFit(F,E,1),z=(s!=F),u=(z?' title="'+F+'"':"");var D='<li id="'+w+'"><div class="apps-category navigation-heading menubutton menu-normalbutton'+y+'" path="'+A+'"><a class="categoryname" role="menuitem" aria-haspopup="true" href="#" onclick="return false;"'+u+">"+G+s+'</a><a class="arrow" role="menuitem" href="#"><img class="foldericon-placeholder _ctxsalt_ClickToExpandFolder" src="'+r.URL_FOLDER_CLOSED+'"/></a></div></li>';if(t.length===0){v.children("ul").append(D)}else{t.before(D)}}}}},_highlightSelectedCategory:function(i){var h=this,g;CTXS.trace("categories","_highlightSelectedCategory "+i);b(".itemclicked").removeClass("itemclicked");h._closeAllFolders();if(i==a){g=h.element.find(".allapps-button").addClass("itemclicked");h._expandParents(i)}else{if(i==d){g=h.element.find(".featured-button").addClass("itemclicked");h._expandParents(i)}else{h._expandParents(i);g=h.element.find(".apps-category").filter(function(){var j=b(this).attr("path");return(i==j)});g.closest("li").addClass("itemclicked")}}h._scrollIntoView(g);h._updateVisibleCategories()},_toggleFolder:function(h){var g=this,i=b(h);if(i.hasClass("foldericon-opened")){i.removeClass("foldericon-opened").addClass("foldericon-closed").attr("src",g.URL_FOLDER_CLOSED_HOVER).closest("li").children("ul").hide()}else{i.removeClass("foldericon-closed").addClass("foldericon-opened").attr("src",g.URL_FOLDER_OPENED_HOVER).closest("li").children("ul").show()}g._updateVisibleCategories()},_updateVisibleCategories:function(){f=b("a.categoryname:visible")},_updateVisibleApps:function(){c=b("a.resource-name:visible")},getVisibleCategories:function(){return f},getVisibleApps:function(){return c},_handleDocumentClick:function(i){var h=this,g=b(i.target);if(g.hasClass("storebutton")){return}if(g.closest("#resources-categoriesmenu").length>0||g.closest("#resources-appsmenu").length>0){return}if(h.element.is(":visible")){e=true;h.hide()}b(document).unbind("click.categoriesmenu")},show:function(){var h=this,g=h.element,i=h.element.find(".categoriesmenu-inner");e=false;g.show();i.css("left","-30px").animate({left:-1},400);b("#resources-categoriesmenu, #resources-appsmenu").ctxsBindFocusWithin();b(".categoriesmenu-inner").ctxsUpdateScrollPane().ctxsScrollToTop();b(document).bind("click.categoriesmenu",function(j){h._handleDocumentClick(j)});h._updateVisibleCategories()},hide:function(){var h=this,g=h.element,k=h.element.find(".categoriesmenu-inner"),j=b("#resources-appsmenu");if(j.is(":visible")){var i=g.add(j);i.fadeTo(500,0,function(){i.hide().css({opacity:1})});b("#resources-categoriesmenu, #resources-appsmenu").ctxsUnbindFocusWithin();h.element.find(".itemclicked").removeClass("itemclicked");h._closeAllFolders()}else{g.show();k.animate({left:-200},300,function(){g.hide()})}h._removeActiveElementSelection();b(document).unbind("click.categoriesmenu")},resize:function(l){var i=b("#resources-categoriesmenu"),k=i.find(".categoriesmenu-inner"),j=b("#resources-appsmenu"),g=j.find("#allapps-picker").outerHeight(true);if(!j.length){return}if(!l){l=i.height()}i.height(l);k.height(l).ctxsUpdateScrollPane();if(l<g){j.height(l).css("top","0px")}else{var h=b(".itemclicked");if(h.length>0){var m=h.position().top;if(m+g<(l)){j.height(g).css("top",(m)+"px")}else{j.height(g).css("top",(l-g)+"px")}}}if(j.is(":visible")){j.ctxsUpdateScrollPane().ctxsScrollToTop()}}})})(jQuery);(function(a){a.widget("ctxs.ctxsMyApps",{_create:function(){var b=this,d="",c;if(CTXS.resources.subscribedApps.length===0){d=b._getEmptyMyAppsHtml()}else{for(c=0;c<CTXS.resources.subscribedApps.length;c++){d+=b._generateAppHtml(CTXS.resources.subscribedApps[c])}}CTXS.IconsLoader.loadIcons(CTXS.resources.subscribedApps);b.element.html(d);b.element.wrap('<div id="myapps-scroller"></div>');a("#myapps-scroller").ctxsCreateScrollPane();b.element.children("div").sortDomElements(function(f,e){return CTXS.OrderMarker.compare(a(f).attr("position"),a(e).attr("position"))});b.element.sortable({items:".resource",cursor:"move",revert:"fast",tolerance:"pointer",handle:".myapps-icon, .myapps-name, .myapps-removehotspot",opacity:0,start:function(g,f){a(document).click();CTXS.trace("myapps","sortable start: ui.item="+f.item.attr("id")+", class="+f.item.attr("class"));f.item.find(".myapps-icon, .myapps-name").css("cursor","move");f.item.addClass("dragged")},stop:function(g,f){CTXS.trace("myapps","sortable stop: ui.item="+f.item.get(0));f.item.find(".myapps-icon, .myapps-name").css("cursor","pointer")},update:function(g,f){CTXS.trace("myapps","sortable update: ui.item="+f.item.get(0));b._updatePosition(f.item)}});b.element.on("click",".myapps-icon, .myapps-name, .myapps-removehotspot",function(g){var h=a(this),e=h.closest(".resource"),f=e.attr("index"),i=CTXS.resources[f];g.preventDefault();if(e.hasClass("dragged")){e.removeClass("dragged");return}if(e.hasClass("launch-waiting")||e.hasClass("subscription-waiting")){return}if(a(g.target).parent().hasClass("myapps-removebutton")){CTXS.unsubscribeApp(i);g.stopPropagation();a(document).trigger("click");b._focusNextApp(e)}else{if(!e.hasClass("disabled")){CTXS.launchResource(i)}}});b.element.on("keydown",".myapps-icon",function(g){if(g.keyCode==CTXS.KEY_DELETE){var h=a(this),e=h.closest(".resource"),f=e.attr("index"),i=CTXS.resources[f];CTXS.unsubscribeApp(i);b._focusNextApp(e)}});b.element.on("mouseenter",".myapps-removehotspot",function(){var f=a(this).find(".myapps-removebutton"),e=f.find("img");e.attr("src","uiareas/Store/media/Icon_close_hint.png");f.show();return false});b.element.on("mouseleave",".myapps-removehotspot",function(){a(this).find(".myapps-removebutton").hide();return false});CTXS.Events.subscribe(CTXS.Events.resources.launchStatus,function(h,i){var e=i.status,f=i.res,g=b._getDomWrapper(f);if(f.isdesktop){return}if(e==CTXS.LAUNCH_STARTING){g.addClass("launch-waiting").removeClass("launch-ready")}else{if((e==CTXS.LAUNCH_SUCCESS)||(e==CTXS.LAUNCH_FAILURE)){g.removeClass("launch-waiting")}else{if(e==CTXS.LAUNCH_READY){g.addClass("launch-ready")}}}});CTXS.Events.subscribe(CTXS.Events.resources.subscriptionStatus,function(h,i){var j=i.app,e=b._getDomWrapper(j),g=i.status,f=(i.operation=="subscribe");if(g==CTXS.SUBSCRIPTION_STARTING){e.addClass("subscription-waiting");f?b.add(j):b.deactivate(j)}else{if(g==CTXS.SUBSCRIPTION_SUCCESS||g==CTXS.SUBSCRIPTION_FAILURE){e.removeClass("subscription-waiting");if(f){e.find("img.myapps-statusicon").remove();e.removeClass("disabled");b.activate(j)}else{b.remove(j)}}else{if(g==CTXS.SUBSCRIPTION_PENDING){e.ctxsMyAppsContextMenu()}}}})},_focusNextApp:function(b){var c=b.next(),d=b.prev();if(c.size()>0){c.find(":focusable:first").focus()}else{if(d.size()>0){d.find(":focusable:first").focus()}else{CTXS.Events.publish(CTXS.Events.resources.relinquishFocus)}}},_flyIcon:function(c,g,d){var h=a("body"),f=a('<img src="'+c.iconurl+'">').appendTo(h);f.css({position:"absolute",left:c.animationOffset.left,top:c.animationOffset.top,"z-index":50});var j=g.find("img");if(j.length!=0){g=j}var i=g.offset();i.left+=parseInt(g.css("padding-left"));i.top+=parseInt(g.css("padding-top"));var b=function(){f.animate({left:i.left,top:i.top},600,"linear",function(){f.remove();if(d){d()}})};var e=700;if((i.left<e)&&(c.animationOffset.left<e)){f.animate({left:e,top:h.height()/2},600,function(){f.css("z-index",3);b()})}else{b()}},add:function(e){var c=this,d=c._generateAppHtml(e);CTXS.trace("myapps","add app.id="+e.id);c.element.find("#myapps-emptyresult").remove();c.element.append(d);c.resize();if(e.animationOffset){var b=c._getDomWrapper(e);b.addClass("hidden");c._flyIcon(e,b,function(){b.removeClass("hidden");if(e.placeFocusOnAdd){b.find(":tabbable:first").focus()}})}},remove:function(d){var c=this,b=c._getDomWrapper(d);CTXS.trace("myapps","myapps->remove app.id="+d.id);b.remove();if(c.element.find(".resource").length===0){c.element.html(c._getEmptyMyAppsHtml())}c.resize()},activate:function(e){var c=this,b=c._getDomWrapper(e),d=(e.skipFadeInOnSubscribe!==true);if(d){if(a.support.opacity){b.css({opacity:0.2}).animate({opacity:"1"},2000)}}else{e.skipFadeInOnSubscribe=false}b.ctxsMyAppsContextMenu()},deactivate:function(d){var c=this,b=c._getDomWrapper(d);if(a.support.opacity){b.css({opacity:1}).animate({opacity:"0.2"},500)}else{b.addClass("disabled")}},previousWidth:0,previousHeight:0,resize:function(g,s){var o=this,p=this.element,b=a("#myapps-scroller"),k=p.find(".resource"),n=k.length,m=false,r,c,v;if(!g){g=o.previousWidth}if(!s){s=o.previousHeight}o.previousWidth=g;o.previousHeight=s;if(n==0){var i=a("#myapps-emptyresult");i.css("width",g+"px");c=(s-i.height())/2;r=0;v=s}else{var l=k.eq(0),t=l.outerWidth(true),u=18,f=Math.floor((g-u)/t);CTXS.trace("myapps","numPerLine="+f+" w="+g+" iw="+t+" scrollbarWidth="+u);f=Math.min(f,n);var q=(f*t);r=Math.floor((g-q-u)/2);var e=l.outerHeight(true),j=Math.floor(s/e),d=Math.ceil(n/f);j=Math.min(j,d);m=j!=d;v=(j*e);c=((s-v)/2);if(!m){v=s}CTXS.trace("myapps","h: "+s+" scrollerHeight: "+v+" marginTop: "+c)}b.height(v);p.css("marginLeft",r+"px");if(m){b.css("marginTop",c+"px");p.css("marginTop","0px");p.css("height","auto")}else{p.css("marginTop",c+"px");p.css("height",s-c+"px");b.css("marginTop","0px")}b.ctxsUpdateScrollPane()},_getDomWrapper:function(b){return this.element.find('.resource[index="'+b.index+'"]')},_getEmptyMyAppsHtml:function(){var c=' class="'+(CTXS.Resources.isStoreEmpty()?"store-inactive":"store-active")+'"',b=CTXS.isHighContrastEnabled()?"uiareas/Store/media/AddAppCoachingMark_blackbg.png":"uiareas/Store/media/AddAppCoachingMark.png";return'<div id="myapps-emptyresult"'+c+'><div id="coachingMark"><img border="0" src="'+b+'"/><p id="can-add-apps"><span id="addYour">'+a.localization.string("AddYour")+"</span><br/><span id='favoriteApps'>"+a.localization.string("FavoriteApps")+'</span></p></div><p id="cannot-add-apps">'+a.localization.string("YouCannotAddApps")+"</p></div>"},_generateAppHtml:function(d){var m='<div class="myapps-myapp resource',h=d.requiresvpn&&CTXS.AccessGateway.hasAgssoOccurred(),l=CTXS.canLaunchResource(d);m+=l?'"':' disabled"';m+=' index="'+d.index+'"';m+=' position="'+d.position+'"';if(d.content!=null){m+=' content="'+d.content+'"'}var g=null;if(d.disabled){g=a.localization.string("AppUnavailable")}else{if(!l){if(!CTXS.WorkflowManager.isLaunchableState(d.subscriptionstatus)){}else{if(h){g=a.localization.string("AppUnavailableClientless")}else{if(d.content&&!CTXS.canBrowserLaunchDocument(d.content)){g=a.localization.string("DocUnavailableBrowser")}else{if(d.ismobileapp){g=a.localization.string("RunAppOnMobilePhoneOrTablet")}else{if(d.clienttypes){g=a.localization.string("AppUnavailablePlatform")}else{g=a.localization.string("AppUnavailable")}}}}}}}var j=g||"";var f=d.displayNameTruncated;if(f){j+=g?"\n"+d.encodedName:d.encodedName}m+=' title="'+j+'"';m+=">";var c=d.encodedName;if(d.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.PENDING){c+=" "+a.localization.string("AppRequestPendingApproval")}else{if(d.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.APPROVED){c+=" "+a.localization.string("AppRequestApproved")}else{if(d.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.DENIED){c+=" "+a.localization.string("AppRequestDenied")}}}m+='<a class="myapps-icon" href="#"><img iconid="'+d.iconid+'" src="'+d.getIconPath()+'" alt="'+c+'" class="iconImage" /></a>';m+='<div class="myapps-status"></div>';m+='<div class="myapps-name">'+d.displayNameBelt+"</div>";if(d.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.PENDING){var i=' title="'+a.localization.string("AppRequestPendingApproval")+'" alt="'+a.localization.string("AppRequestPendingApproval")+'"';m+='<img src="uiareas/Store/media/pending.png" class="myapps-statusicon"'+i+"/>"}else{if(d.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.APPROVED){var b=' title="'+a.localization.string("AppRequestApproved")+'" alt="'+a.localization.string("AppRequestApproved")+'"';m+='<img src="uiareas/Store/media/Added_checkMark.png" class="myapps-statusicon"'+b+"/>"}else{if(d.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.DENIED){var k=' title="'+a.localization.string("AppRequestDenied")+' alt="'+a.localization.string("AppRequestDenied")+'"';m+='<img src="uiareas/Store/media/accessDenied.png" class="myapps-statusicon"'+k+"/>"}}}var e=' title= "'+a.localization.string("Remove")+'"';m+='<div class="myapps-removehotspot"><a class="myapps-removebutton hoverable"><img class="_ctxsalt_Remove" src="uiareas/Store/media/Icon_close_hint.png" data-hover="uiareas/Store/media/Icon_close_solid.png"'+e+'" width="20px" height="20px"/></a></div>';m+="</div>";return m},_updatePosition:function(c){CTXS.trace("myapps","update position");var e=c.prev(),d=c.next(),b=(e.length>0)?e.attr("position"):CTXS.OrderMarker.zero,g=(d.length>0)?d.attr("position"):-1,f=c.attr("index"),h=CTXS.resources[f];h.position=(g===-1)?CTXS.Resources.nextPosition():CTXS.OrderMarker.getBetween(b,g);c.attr("position",h.position);CTXS.trace("myapps","update position ="+h.position);CTXS.ResourcesClient.updateSubscriptionPosition(CTXS.Config.storeProxy.resourcesProxy.updatePositionURL,h)}})})(jQuery);(function(a){a.widget("ctxs.ctxsMyDesktops",{_create:function(){var b=this,f=CTXS.resources,e=[],d="",c;for(c=0;c<f.length;c++){if(f[c].isdesktop){e.push(f[c])}}if(e.length==0){d=b._getEmptyMyDesktopsHtml()}else{for(c=0;c<e.length;c++){d+=b._generateDesktopHtml(e[c])}}b.element.html(d);b.element.wrap('<div id="mydesktops-scroller"></div>');a("#mydesktops-scroller").ctxsCreateScrollPane();b.element.children("div").sortDomElements(function(i,g){var j=a(i).attr("index"),h=a(g).attr("index"),l=CTXS.resources[j].displayNameDesktopTitle.toLowerCase(),k=CTXS.resources[h].displayNameDesktopTitle.toLowerCase();return(l<k)?-1:(l>k)?1:0});b.element.on("click",".myapps-icon, .myapps-name, .myapps-removehotspot, .myapps-status",function(g){var i=a(this),h=i.closest(".resource"),j=CTXS.resources[h.attr("index")];g.preventDefault();if(h.hasClass("launch-waiting")){return}if(!h.hasClass("disabled")){if(typeof(j.assigndesktopurl)!="undefined"&&CTXS.ICA.isCorrectZone){CTXS.assignDesktop(j);return}CTXS.launchResource(j)}});b.element.bind("mousedown",function(g){g.preventDefault();return true});b.element.on("mouseenter",".myapps-status",function(){a(this).closest(".resource").find(".myapps-icon").addClass("hovered")});b.element.on("mouseleave",".myapps-status",function(){a(this).closest(".resource").find(".myapps-icon").removeClass("hovered")});CTXS.Events.subscribe(CTXS.Events.resources.launchStatus,function(j,k){var g=k.status,h=k.res,i=b._getDomWrapper(h);if(!h.isdesktop){return}if(g==CTXS.LAUNCH_STARTING){i.addClass("launch-waiting").removeClass("launch-ready")}else{if(g==CTXS.LAUNCH_SUCCESS){i.removeClass("launch-waiting desktop-notlaunched").addClass("desktop-launched")}else{if(g==CTXS.LAUNCH_FAILURE){i.removeClass("launch-waiting desktop-launched").addClass("desktop-notlaunched")}else{if(g==CTXS.LAUNCH_READY){i.addClass("launch-ready")}}}}});CTXS.Events.subscribe(CTXS.Events.resources.powerOffStatus,function(g,i){var h=b._getDomWrapper(i.desktop);if(i.status==CTXS.POWEROFF_STARTING){h.addClass("poweroff-waiting")}else{h.removeClass("poweroff-waiting")}});CTXS.Events.subscribe(CTXS.Events.resources.assignDesktopStatus,function(g,i){var h=b._getDomWrapper(i.desktop);if(i.status==CTXS.ASSIGNDESKTOP_STARTING){h.addClass("assignment-waiting")}else{h.removeClass("assignment-waiting");if(i.status==CTXS.ASSIGNDESKTOP_SUCCESS){h.attr("title",b.generateDesktopIconTooltip(i.desktop));CTXS.launchResource(i.desktop)}else{if(i.status==CTXS.ASSIGNDESKTOP_FAILURE){CTXS.alertBox(a.localization.string("CannotStartDesktop",i.desktop.displayNameDesktopTitle))}}}})},_getEmptyMyDesktopsHtml:function(){var e=(CTXS.Config.userInterface.uiViews.showAppsView=="true");var d=(CTXS.Config.userInterface.uiViews.showDesktopsView=="true");var b=d&&!e;var c=b?"YouCannotUseDesktops":"YouCannotUseAppsOrDesktops";return'<div id="mydesktops-emptyresult" class="centered"><p id="cannot-use-desktops">'+a.localization.string(c)+"</p></div>"},previousWidth:0,previousHeight:0,resize:function(g,s){var o=this,p=this.element,b=a("#mydesktops-scroller"),k=p.find(".resource"),n=k.length,m=false,r,c,v;if(!g){g=o.previousWidth}if(!s){s=o.previousHeight}o.previousWidth=g;o.previousHeight=s;if(n==0){var i=a("#myapps-emptyresult");i.css("width",g+"px");c=(s-i.height())/2;r=0;v=s}else{var l=k.eq(0),t=l.outerWidth(true),u=18,f=Math.floor((g-u)/t);CTXS.trace("myapps","numPerLine="+f+" w="+g+" iw="+t+" scrollbarWidth="+u);f=Math.min(f,n);var q=(f*t);r=Math.floor((g-q-u)/2);var e=l.outerHeight(true),j=Math.floor(s/e),d=Math.ceil(n/f);j=Math.min(j,d);m=j!=d;v=(j*e);c=((s-v)/2);if(!m){v=s;r+=u/2}CTXS.trace("myapps","h: "+s+" scrollerHeight: "+v+" marginTop: "+c)}b.height(v);p.css("marginLeft",r+"px");if(m){b.css("marginTop",c+"px");p.css("marginTop","0px");p.css("height","auto")}else{p.css("marginTop",c+"px");p.css("height",s-c+"px");b.css("marginTop","0px")}b.ctxsUpdateScrollPane()},_getDomWrapper:function(b){return this.element.find('.resource[index="'+b.index+'"]')},generateDesktopIconTooltip:function(b){if(b){return a.localization.string("DesktopTooltipFormat",b.displayNameBelt,b.desktophostname)}return null},_generateDesktopHtml:function(h){var d=this;var b='<div class="myapps-myapp resource desktop-notlaunched',c=(h.clienttypes&&(a.inArray("ica30",h.clienttypes)>-1));b+=(c&&!h.disabled)?'"':' disabled"';b+=' index="'+h.index+'"';if(h.content!=null){b+=' content="'+h.content+'"'}var e=null;if(!c){if(h.clienttypes){e=a.localization.string("AppUnavailablePlatform")}}else{if(h.disabled){e=a.localization.string("AppUnavailable")}}var g=e||"";var f=h.displayNameTruncated;if(f){g+=e?"\n":"";g+=CTXS.encodeHtmlForAttr(h.displayNameDesktopTitle)}b+=' title="'+g+'"';b+=">";if(typeof(h.desktophostname)!=="undefined"){b+='<a class="myapps-icon" title="'+d.generateDesktopIconTooltip(h)+'" href="#">'}else{b+='<a class="myapps-icon" href="#">'}b+='<img iconid="'+h.iconid+'" src="'+h.getIconPath()+'" class="iconImage" alt="'+h.encodedName+'" /></a>';b+='<div class="myapps-status"></div>';b+='<div class="myapps-name">'+h.displayNameBelt+"</div>";b+="</div>";return b}})})(jQuery);(function(a){a.widget("ctxs.ctxsSkipLinks",{options:{initialView:null},_create:function(){var c=this,b='<a href="#" id="skipTo"></a>';if(c.options.initialView==null){c.options.initialView=CTXS.Config.userInterface.uiViews.defaultView}var d=(c.options.initialView==CTXS.APPS_VIEW)?"SkipToDesktops":"SkipToApps";CTXS.Events.subscribe(CTXS.Events.resources.viewChanged,function(e,g){var f=(g.currentView==CTXS.APPS_VIEW)?"SkipToDesktops":"SkipToApps";c.element.find("#skipTo").text(a.localization.string(f))});c.element.html(a(b)).find("#skipTo").text(a.localization.string(d)).on("click",c._clickHandler)},_clickHandler:function(b){if(CTXS.CURRENT_VIEW==CTXS.DESKTOPS_VIEW){CTXS.showAppsView({selector:".myapps-icon:tabbable:first"})}else{if(CTXS.CURRENT_VIEW==CTXS.APPS_VIEW){CTXS.showDesktopsView({selector:":tabbable:first"})}}b.preventDefault()}})})(jQuery);window.CTXS=$.extend(window.CTXS||{},{DESKTOPS_VIEW:"desktops",APPS_VIEW:"apps",CURRENT_VIEW:""});(function(a){a.widget("ctxs.ctxsSwitcher",{options:{initialView:null},_create:function(){var c=this,b='<div id="apps-button" class="switcher-button"><a href="#"></a></div><div id="desktops-button" class="switcher-button"><a href="#"></a></div>';c.element.html(a(b));a("#apps-button a").click(function(d){c.showAppsView({selector:".myapps-icon:tabbable:first"});d.preventDefault()}).text(a.localization.string("SwitcherApps"));a("#desktops-button a").click(function(d){c.showDesktopsView({selector:":tabbable:first"});d.preventDefault()}).text(a.localization.string("SwitcherDesktops"));if(c.options.initialView==null){c.options.initialView=CTXS.Config.userInterface.uiViews.defaultView}if(c.options.initialView==CTXS.APPS_VIEW){CTXS.CURRENT_VIEW=CTXS.APPS_VIEW;a("#resources-mydesktops").hide();a("#resources-myapps, #resources-navigationbar").show();a("#apps-button").addClass("selected")}else{CTXS.CURRENT_VIEW=CTXS.DESKTOPS_VIEW;a("#resources-myapps, #resources-navigationbar").hide();a("#resources-mydesktops").show();a("#desktops-button").addClass("selected")}},showAppsView:function(g){g=a.extend({},g);var f=a.Deferred();var e=this,d=a("#resources-myapps"),i=a("#resources-mydesktops"),b=a("#myapps-scroller"),h=a("#resources-navigationbar"),c=a("#apps-button");if(CTXS.CURRENT_VIEW==CTXS.APPS_VIEW||e.animatingView){return}CTXS.CURRENT_VIEW=CTXS.APPS_VIEW;a(".switcher-button").removeClass("selected");c.addClass("selected");e.animatingView=true;i.fadeOut(100,function(){d.css("display","block");a("#myapps-pane").ctxsMyApps("resize");b.ctxsUpdateScrollPane();d.css("display","none");d.add(h).fadeIn(200).promise().done(function(){e.animatingView=false;if(g.selector){var j=d.find(g.selector);if(j.size()==1){j.focus()}else{CTXS.Events.publish(CTXS.Events.resources.relinquishFocus)}}f.resolve();CTXS.Events.publish(CTXS.Events.resources.viewChanged,{currentView:CTXS.APPS_VIEW})})});return f.promise()},showDesktopsView:function(e){e=a.extend({},e);var d=a.Deferred();var c=this,b=a("#resources-myapps"),i=a("#resources-mydesktops"),f=a("#mydesktops-scroller"),h=a("#resources-navigationbar"),g=a("#desktops-button");if(CTXS.CURRENT_VIEW==CTXS.DESKTOPS_VIEW||c.animatingView){return}CTXS.CURRENT_VIEW=CTXS.DESKTOPS_VIEW;a(".switcher-button").removeClass("selected");g.addClass("selected");c.animatingView=true;b.add(h).fadeOut(100).promise().done(function(){i.css("display","block");f.ctxsUpdateScrollPane();i.css("display","none");i.fadeIn(200,function(){c.animatingView=false;if(e.selector){i.find(e.selector).focus()}d.resolve();CTXS.Events.publish(CTXS.Events.resources.viewChanged,{currentView:CTXS.DESKTOPS_VIEW})})});return d.promise()}})})(jQuery);jQuery.fn.sortDomElements=(function(){return function(a){return Array.prototype.sort.call(this,a).each(function(b){this.parentNode.appendChild(this)})}})();(function(a){a.fn.ctxsResourceFilter=function(){CTXS.trace("filter","ctxsResourceFilter: called for "+this);var b=this,c=b.find(".resource"),d={search:null};CTXS.Events.subscribe(CTXS.Events.resources.filter,function(g,f){CTXS.trace("filter","caught OpenAjax Event="+g+", options="+f);var i=a.extend({folder:null,subscribed:0,recommended:0},f||{});if((i.folder==d.folder)&&(i.subscribed==d.subscribed)&&(i.recommended==d.recommended)){return}CTXS.trace("filter"," cat="+i.category);c=b.find(".resource");b.children(".resourcesfolder").remove();c.removeAttr("foldersortkey");var e=[];c.each(function(){var j=a(this);if((i.subscribed==0||(i.subscribed>0&&j.hasClass("subscribed"))||(i.subscribed<0&&!j.hasClass("subscribed")))&&(i.recommended==0||(i.recommended>0&&j.hasClass("recommended"))||(i.recommended<0&&!j.hasClass("recommended")))&&(!i.folder||j.attr("folder").indexOf(i.folder)==0)){var k="";if(i.folder){k=j.attr("folder").substring(i.folder.length);if(k){if(k.indexOf("\\")!=-1){k=k.substring(0,k.indexOf("\\")+1)}if(a.inArray(k,e)==-1){e.push(k)}j.attr("foldersortkey",CTXS.encodeHtmlForAttr(k+j.attr("name")))}}j.removeClass("hidden")}else{j.addClass("hidden")}});a.each(e,function(j,l){l=CTXS.truncateToFit(l,230,1);var m=CTXS.encodeHtmlForAttr(l);var k=a('<div class="resourcesfolder" foldersortkey="'+m+'"><span>'+m.replace(/\\$/,"")+"</span></div>");b.append(k)});var h=0;if(e.length==0){if(b.hasClass("folder_sorted")){CTXS.trace("filter","using alpha sort");b.children("div").sortDomElements(function(k,j){h++;var l=a(k).attr("name").toLowerCase(),m=a(j).attr("name").toLowerCase();return(l<m)?-1:(l>m)?1:0});b.removeClass("folder_sorted")}else{CTXS.trace("filter","already sorted - skipping")}}else{CTXS.trace("filter","using folder sort");b.children("div:not(.hidden)").sortDomElements(function(k,j){h++;var o=a(k),l=a(j),n=o.attr("foldersortkey"),m=l.attr("foldersortkey");if(n&&m){return CTXS.compareCategoryNameAppsMenu(n,m)}else{if(n){return 1}else{if(m){return -1}else{return CTXS.compareCategoryName(o.attr("name"),l.attr("name"))}}}});b.addClass("folder_sorted")}CTXS.trace("filter","sort function invocations: "+h);d=i})}})(jQuery);(function(a){a.widget("ctxs.ctxsSearch",{_create:function(){var d=this,b=d.element,c='<div class="searchbox-container"><div style="margin-left: 0px; text-align: left;"><input class="searchbox-textbox" type="text" autocomplete="off" title="'+a.localization.string("Search")+'"/><a class="searchbox-cancel" tabindex="0"><img class="_ctxsalt_CloseSearchResults" src="uiareas/Store/media/cancel.png" /></a><div class="searchbox-results"><div class="scroller"><div class="scrollerinner"><div class="resultshere-heading"><span>'+a.localization.toString("MatchesIn")+'</span><div class="cat"></div></div><div class="resultshere-results"></div><div class="resultsother-heading _ctxstxt_OtherMatches"></div><div class="resultsother-results"></div><div class="results-nomatch _ctxstxt_NoMatches"></div><div class="results-keeptyping _ctxstxt_KeepTyping"></div></div></div></div></div></div>';b.html(a(c));this.$searchbox=b.find(".searchbox-textbox");this.$cancel=b.find(".searchbox-cancel");this.$results1=b.find(".resultshere-results");this.$results2=b.find(".resultsother-results");this.$resultsbox=b.find(".searchbox-results");this.$results1head=b.find(".resultshere-heading");this.$results2head=b.find(".resultsother-heading");this.$nomatch=b.find(".results-nomatch");this.$keeptyping=b.find(".results-keeptyping");this.$scroller=b.find(".scroller");this.$scrollerinner=b.find(".scrollerinner");this.$container=b.find(".searchbox-container");this.showingResults=false;this.processingItemClick=false;this.$scroller.ctxsCreateScrollPane();CTXS.Events.subscribe(CTXS.Events.resources.relinquishFocus,function(){d.setFocus()});this.$resultsbox.on("click",".searchresult-item",function(e){d._onItemClick(this,e)});this.$searchbox.bind("blur",function(){if(!d.showingResults){d._resetTextBox()}});this.$container.keydown(function(g){var f,e;if(g.keyCode==CTXS.KEY_UP){if(a(".searchresult-item.active").length==0){}else{f=a(".searchresult-item.active")[0];e=a.inArray(f,d.currentSearchResults);a(".searchresult-item").removeClass("active");if(e==0){d.setFocus()}else{a(d.currentSearchResults[e-1]).addClass("active");a(d.currentSearchResults[e-1]).find(".name").focus();d.$scroller.ctxsUpdateScrollPane()}}}else{if(g.keyCode==CTXS.KEY_DOWN){f=a(".searchresult-item.active")[0];e=a.inArray(f,d.currentSearchResults);if(d.currentSearchResults!=null&&e!=d.currentSearchResults.length-1){a(".searchresult-item").removeClass("active");a(d.currentSearchResults[e+1]).addClass("active");a(d.currentSearchResults[e+1]).find(".name").focus();d.$scroller.ctxsUpdateScrollPane()}}}});b.on("focus",".searchresult-item:first",function(){a(".scroller").ctxsUpdateScrollPane().ctxsScrollToTop()});b.on("hover",".searchresult-item",function(){if(d.hoverEnabled){a(".searchresult-item").removeClass("active");a(this).addClass("active");a(this).find(".name").focus()}return false});b.on("focus",".searchresult-item",function(){a(".searchresult-item").removeClass("active");a(this).addClass("active")});b.on("mousemove",".searchbox-results",function(e){if(e.pageX!=d.pageX||e.pageY!=d.pageY){d.hoverEnabled=true}d.pageX=e.pageX;d.pageY=e.pageY});b.on("blur",".searchresult-item:last",function(){a(this).removeClass("active")});this.$searchbox.keyup(function(e){if(e.keyCode==CTXS.KEY_ESCAPE){d._resetTextBox();return}if(e.keyCode==CTXS.KEY_UP||e.keyCode==CTXS.KEY_DOWN||e.keyCode==CTXS.KEY_TAB||e.keyCode==CTXS.KEY_SHIFT){return}d._onInput(this.value)});this.$searchbox.bind("click focus",function(){if(d._isTextBoxReset()){d.$searchbox.removeClass("lighttext")}a(".searchresult-item").removeClass("active")});this.$cancel.click(function(){d._resetTextBox();d._hideResultBox();CTXS.Events.publish(CTXS.Events.resources.relinquishFocus)});this.$cancel.keydown(function(f){if(f.which==CTXS.KEY_ENTER){d.$cancel.triggerHandler("click")}});this._resetTextBox()},_isTextBoxReset:function(){return this.$searchbox.val()==""},_resetTextBox:function(){CTXS.trace("search","reseting search textbox");this.$searchbox.val("");this.$searchbox.addClass("lighttext");this.$cancel.hide()},_handleDocumentClick:function(c){var b=this;CTXS.trace("search","document click event: hiding search results. clicked on: "+c.target.className);if(a(c.target).closest(".searchbox-container").length>0){return}b._resetTextBox();if(b.showingResults){b._hideResultBox()}a(document).unbind("click.searchmenu")},_hideResultBox:function(){var b=this;if(a.support.opacity){this.$resultsbox.fadeOut(function(){b.processingItemClick=false})}else{this.$resultsbox.hide();this.processingItemClick=false}this.showingResults=false;a(document).unbind("click.searchmenu");b.$container.ctxsUnbindFocusWithin()},_showResultBox:function(){var b=this;if(a.support.opacity){this.$resultsbox.fadeIn()}else{this.$resultsbox.show()}this.showingResults=true;a(".scroller").ctxsUpdateScrollPane().ctxsScrollToTop();a(document).bind("click.searchmenu",function(c){b._handleDocumentClick(c)})},_onInput:function(c){var b=this;CTXS.trace("search","_onInput called. newSearch = "+c);b.hoverEnabled=false;if(b._isTextBoxReset()){b.$cancel.hide();b._hideResultBox()}else{b._buildSearchResults(c,500);a(".scroller").ctxsUpdateScrollPane().ctxsScrollToTop();b.$container.ctxsBindFocusWithin({selector:".searchresult-item a.name, .searchbox-cancel, .searchbox-textbox"});if(!b.showingResults){b.$cancel.show();b._showResultBox();b.showingResults=true}}},_searchInApp:function(e,d){CTXS.trace("search","_searchInApp called. app={0}, searchwords={1}".format(e.displayName,d));var j=e.tag,h=e.path.toLowerCase(),b=1;for(var f in d){var c=d[f],i=false,g=-1;for(;;){g=j.indexOf(c,g+1);if(g==-1){break}if((g==0)||(j[g-1]==" ")){i=true;break}}if(!i){g=-1;b=2;for(;;){g=h.indexOf(c,g+1);if(g==-1){break}if((g==0)||(h[g-1]==" ")||(h[g-1]=="\\")){i=true;break}}}if(!i){return 0}}return b},_onItemClick:function(f,g){var d=this,c=a(g.target).closest(".searchresult-item"),e=c.attr("index"),h=CTXS.resources[e];CTXS.trace("search","_onItemClick called, app name = "+h.name);if(d.processingItemClick){return}d.processingItemClick=true;var b=h.isdesktop?CTXS.showDesktopsView:CTXS.showAppsView;a.when(b()).done(function(){var i='.resource[index="'+h.index+'"] :tabbable';if(CTXS.WorkflowManager.isWorkflowState(h.subscriptionstatus)){a("#resources-container").find(i).focus();return false}else{if(h.subscriptionstatus==CTXS.SUBSCRIPTION_STATUS.SUBSCRIBED||h.isdesktop){a("#resources-container").find(i).focus();CTXS.launchResource(h)}else{if(h.requiresworkflow){CTXS.WorkflowManager.workflowStartNotification(null,h)}else{h.animationOffset=c.find("img").offset();h.placeFocusOnAdd=true;CTXS.subscribeApp(h)}}}d._hideResultBox();d._resetTextBox()})},_buildSearchResults:function(p,c){CTXS.trace("search","_buildSearchResult started with parameters (text={0}, maxHits={1})".format(p,c));this.$results1.children().remove();this.$results2.children().remove();var r=0,f=33,g;p=p.replace(/\u3000/g," ");var m=p.toLowerCase().split(" ");var q=(CTXS.Config.userInterface.uiViews.showDesktopsView=="true");for(g=0;g<CTXS.resources.length;g++){var l=CTXS.resources[g];if(!(l.showInStore||(l.isdesktop&&q))){continue}var n=this._searchInApp(l,m);if(n!=0){var k='<div class="searchresult-item',b=l.getIconPath();if(CTXS.WorkflowManager.isVisibleState(l.subscriptionstatus)||l.isdesktop){k+=" subscribed"}k+='"';if(l.displayNameTruncated){var s=l.name;s=CTXS.encodeHtmlForAttr(s);k+='title="'+s+'"'}var o="uiareas/Store/media/";k+=' index="'+l.index+'"><img class="resource-icon" src="'+b+'" alt=""/><a class="name" role="menuitem" href="#" onclick="return false">'+l.displayName+'</a><img class="subscription-icon" src="'+o+CTXS.WorkflowManager.subscriptionImage(l.subscriptionstatus)+'" alt=""/></div>';if(l.recommended){this.$results1.append(k)}else{this.$results2.append(k)}r++;if(r>c){break}}this.currentSearchResults=a.find(".searchresult-item")}var j=0;if((r>0)&&(r<c)){var e=this.$results1.children().length,d=this.$results2.children().length;this.$results2head.text(a.localization.string("OtherCategories"));if((e>0)&&(d>0)){this.$results1head.text(a.localization.string("Featured"));this.$results1.show();this.$results2.show();this.$results1head.show();this.$results2head.show();this.$nomatch.hide();this.$keeptyping.hide();j+=(e+d+2)*f}else{if(e>0){this.$results1.show();this.$results2.hide();this.$results1head.hide();this.$results2head.hide();this.$nomatch.hide();this.$keeptyping.hide();j+=e*f}else{if(d>0){this.$results1.hide();this.$results2.show();this.$results1head.hide();this.$results2head.hide();this.$nomatch.hide();this.$keeptyping.hide();j+=d*f}}}}else{this.$results1.hide();this.$results2.hide();this.$results1head.hide();this.$results2head.hide();if(r==0){this.$nomatch.show();this.$keeptyping.hide()}else{this.$nomatch.hide();this.$keeptyping.show()}j=f}j=Math.min(j,a(window).height()-60);this.$scroller.height(j)},setFocus:function(){if(a(".searchbox-textbox").is(":visible")){var b=this;a(".searchbox-textbox").attr("disabled",false);b.$searchbox.focus()}}})})(jQuery);(function(g){var f=function(){var k={},j={};k[g.localization.string("Start")]=e;j[g.localization.string("Remove")]=i;return[k,j]};var c=function(){var j={};j[g.localization.string("Remove")]=i;return[j]};var b=function(){var j={};j[g.localization.string("Start")]=e;return[j]};var d=function(){var k={},j={};k[g.localization.string("Start")]=e;j[g.localization.string("Restart")]=h;return[k,j]};g.fn.ctxsMyAppsContextMenu=function(){var j=(this.hasClass("myapps-myapp")?this:this.find(".myapps-myapp"));j.each(function(){var m=g(this).hasClass("disabled"),l=CTXS.resources[g(this).attr("index")],o;if(l.isdesktop){if(l.poweroffurl){o=d}else{o=b}}else{if(m){o=c}else{o=f}}var n=g(this).find(".myapps-icon");n.contextMenu(o,{shadow:false,appendTo:"#contextmenu",beforeShow:function(){g(document).click();g("#contextmenu").data("activatedFrom",n)}})});g("#contextmenu").on("keyup.contextMenu",a);var k=g(this).find(".myapps-icon");k.keydown(function(l){if(l.keyCode==CTXS.KEY_F10&&l.shiftKey){g(this).trigger("contextmenu");l.preventDefault()}});return this};function a(j){if(j.keyCode==CTXS.KEY_ESCAPE){g(document).triggerHandler("click.hidemenu");g("#contextmenu").data("activatedFrom").focus();return false}}function e(){var j=g(this).closest(".resource").attr("index"),k=CTXS.resources[j];CTXS.launchResource(k)}function i(){var j=g(this).closest(".resource").attr("index"),k=CTXS.resources[j];CTXS.unsubscribeApp(k)}function h(){var j=g(this).closest(".resource").attr("index"),k=CTXS.resources[j];CTXS.promptForRestartDesktop(k)}})(jQuery);(function(a){a.widget("ctxs.ctxsUserMenu",{options:null,URL_DOWN_ARROW:"uiareas/Store/media/DownArrow.png",URL_DOWN_ARROW_SELECTED:"uiareas/Store/media/DownArrowSelected.png",_create:function(){var d=this,c='<div class="usermenu"><div class="usermenu-top"></div><div class="usermenu-body"></div><div class="usermenu-bottom"></div></div>';d.$parent=d.element.parent();d.$parent.append(a(c));d.$openIndicator=d.element.append('<img src="'+d.URL_DOWN_ARROW+'" alt=""/>').find(">img");d._initializeOptions();var b=d.element,e=d.element.parent().find(".usermenu");d._generateDropDownMenu(e);var f=function(g){if(g.target==d.element[0]||g.target==d.$openIndicator[0]){return}CTXS.trace("usermenu","clicked on document somewhere outside the workspace menu button, this event should only be bound when the user menu is visible");e.hide();d._cleanupMenu()};d.element.click(function(g){CTXS.trace("usermenu","clicked on the workspace menu button. event target: "+g.target.className);e.toggle();if(e.is(":visible")){b.addClass("pressed");d.$openIndicator.attr("src",d.URL_DOWN_ARROW_SELECTED);a(document).bind("click.usermenu",f);d.$parent.ctxsBindFocusWithin().ctxsEnableArrowNavigation().ctxsUnifyHoverFocus({exclude:"#header-username"})}else{d._cleanupMenu()}g.preventDefault()});d.element.on("mouseenter",function(){d.$openIndicator.attr("src",d.URL_DOWN_ARROW_SELECTED);return false});d.element.on("mouseleave",function(){if(!a(this).hasClass("pressed")){d.$openIndicator.attr("src",d.URL_DOWN_ARROW)}return false});d.$parent.keyup(function(g){if(g.keyCode==CTXS.KEY_ESCAPE&&e.is(":visible")){d.element.triggerHandler("click");d.element.focus();return false}else{if(!e.is(":visible")&&(g.keyCode==CTXS.KEY_DOWN||g.keyCode==CTXS.KEY_UP)){d.element.triggerHandler("click")}}return true})},_cleanupMenu:function(){var b=this;a(document).unbind("click.usermenu");b.$openIndicator.attr("src",b.URL_DOWN_ARROW);b.element.removeClass("pressed");b.$parent.ctxsUnbindFocusWithin().ctxsDisableArrowNavigation().ctxsUnbindHoverFocusEvents();b.$parent.find(".active").removeClass("active")},_generateDropDownMenu:function(e){var c=this,g=e.children(".usermenu-body"),f=c.options.showActivateReceiver,d=CTXS.Config.userInterface.receiverConfiguration.downloadURL,b=CTXS.getCSRFToken();if(f&&d&&b){d=CTXS.updateQueryString(d,"CsrfToken",b);g.append('<a id="userdetails-activatereceiver" class="_ctxstxt_ActivateReceiver _ctxstip_ActivateReceiverToolTip" href="{0}" role="menuitem"></a>'.format(d))}if(CTXS.getCookie("PasswordChangeAllowed")=="true"){g.append('<a id="userdetails-changepassword" class="_ctxstxt_ChangePassword" href="#" role="menuitem" aria-label="'+a.localization.string("ChangePassword")+'"></a>');a("#userdetails-changepassword").click(function(h){var i=a("#alertbox");CTXS.trace("application","creating Credential Update widget");i.credentialUpdate({url:CTXS.Config.authManager.changeCredentialsURL,isFromStoreUI:true});i.credentialUpdate("changePassword");h.preventDefault()})}if(CTXS.WorkspaceControl.isAllowed()){if(c.options.showConnect&&CTXS.WorkspaceControl.isSessionReconnectAllowed()){g.append('<a href="#" id="userdetails-connect" class="_ctxstxt_Connect" role="menuitem"></a>').find("#userdetails-connect").click(function(h){CTXS.WorkspaceControl.reconnectAppSessions();h.preventDefault()})}if(c.options.showDisconnect){g.append('<a href="#" id="userdetails-disconnect" class="_ctxstxt_Disconnect" role="menuitem"></a>').find("#userdetails-disconnect").click(function(h){CTXS.LogoffManager.logoff(false,true);h.preventDefault()})}}if(c.options.showLogOff){g.append('<a id="userdetails-logoff" class="_ctxstxt_LogOff" href="#" role="menuitem" aria-label="'+a.localization.string("LogOff")+'"></a>');if(CTXS.WorkspaceControl.isAllowed()&&c.options.logoffAction=="disconnect"){a("#userdetails-logoff").addClass("_ctxstip_DisconnectApps")}a("#userdetails-logoff").click(function(h){CTXS.LogoffManager.logoff(c.options.logoffAction=="terminate",c.options.logoffAction=="disconnect");h.preventDefault()})}},_initializeOptions:function(){var c=this,b=CTXS.Config.userInterface.workspaceControl,d={showActivateReceiver:CTXS.Config.userInterface.receiverConfiguration.enabled=="true",showConnect:b.showReconnectButton=="true",showDisconnect:b.showDisconnectButton=="true",showLogOff:true,logoffAction:b.logoffAction};a.extend(d,c.options||{});c.options=d},destroy:function(){a.Widget.prototype.destroy.call(this);this.element.parent().find(".usermenu").remove()}})})(jQuery);(function(){document.addEventListener("drop",function(a){a.preventDefault()});document.addEventListener("dragstart",function(a){a.preventDefault()});window.CTXS=window.CTXS||{};if(!(window.location.search=="?standalone"||window.location.search=="?standalonelogin")){CTXS.trigger=function(a){request=new XMLHttpRequest();request.onreadystatechange=function(){};request.open("POST",a,true);request.send()}}else{CTXS.trigger=function(a){}}CTXS.displayTemplate=function(a){};CTXS.SecuritySettings={isUsingHttps:function(){return false}};CTXS.AccessGateway={hasAgssoOccurred:function(){return false}};CTXS.ClientInfo={isIE:function(){return false},isWindows:function(){return false}};CTXS.Html5Client={isSupportedHtml5Platform:function(){return false},mustUseHtml5Client:function(){return false},usingHtml5Client:function(){return false}};CTXS.AuthClient={getUsername:function(a){CTXS.trigger(a)}};CTXS.launchResource=function(a){var b=a.launchurl.replace("/LaunchIca/","/GetLaunchStatus/").replace("/Launch/","/GetLaunchStatus/");CTXS.Events.publish(CTXS.Events.resources.launchStatus,{status:CTXS.LAUNCH_STARTING,res:a,details:null});CTXS.trigger(b+"/"+a.index)};CTXS.ResourcesClient={requestResources:function(a,b){CTXS.trigger(a)},updateSubscriptionPosition:function(a,b){CTXS.trigger(a+"/"+b.id+"/"+b.position);CTXS.Events.publish(CTXS.Events.resources.updatePositionSuccess)},subscription:function(b,a){if(a==="subscribe"){CTXS.trigger("Resources/subscription/"+a+"/"+b.id+"/"+b.position);b.subscriptionstatus=CTXS.SUBSCRIPTION_STATUS.SUBSCRIBED}else{CTXS.trigger("Resources/subscription/"+a+"/"+b.id+"/dummy");b.subscriptionstatus=CTXS.SUBSCRIPTION_STATUS.NOTSUBSCRIBED}CTXS.Events.publish(CTXS.Events.resources.subscriptionStatus,{status:CTXS.SUBSCRIPTION_SUCCESS,app:b,operation:a})}};CTXS.getIconId=function(a){return a};CTXS.LogoffManager={logoff:function(b,a){CTXS.trigger("Authentication/Logoff");CTXS.Events.publish(CTXS.Events.resources.updatePositionSuccess)}}})();$(document).ready(function(){CTXS.Application.preinit();xmlparser=new DOMParser();if(window.location.search=="?standalone"||window.location.search=="?standalonelogin"){CTXS.getLocale=function(){return"en-US,en;q=0.5"}}xml=xmlparser.parseFromString('<clientSettings><session timeout="20" userLanguages="'+CTXS.getLocale()+'" /><authManager loginURL="Authentication/Login" getUsernameURL="Authentication/GetUserName" logoffURL="Authentication/Logoff" changeCredentialsURL="Authentication/GetChangeCredentialForm" loginFormTimeout="5" /><storeProxy><resourcesProxy listURL="Resources/List" updatePositionURL="Resources/UpdateSubscriptionPosition" /><sessionsProxy listAvailableURL="Sessions/ListAvailable" launchURL="Sessions/Launch" disconnectURL="Sessions/Disconnect" logoffURL="Sessions/Logoff" /></storeProxy><pluginAssistant enabled="true" upgradeAtLogin="false"><win32 path="http://downloadplugins.citrix.com.edgesuite.net/Windows/CitrixReceiverWeb.exe" /><macOS path="http://downloadplugins.citrix.com.edgesuite.net/Mac/CitrixReceiverWeb.dmg" minimumSupportedOSVersion="10.6" /><html5 enabled="Fallback" platforms="Firefox;Chrome;Version/([6-9]|\d\d).*Safari;MSIE \d\d" launchURL="clients/HTML5Client/src/SessionWindow.html" preferences="" singleTabLaunch="false" /></pluginAssistant><userInterface frameOptions="deny" autoLaunchDesktop="true"><workspaceControl enabled="true" autoReconnectAtLogon="true" logoffAction="disconnect" showReconnectButton="false" showDisconnectButton="false" /><receiverConfiguration enabled="true" downloadURL="ServiceRecord/GetDocument/receiverconfig.cr" /><uiViews showDesktopsView="true" showAppsView="true" defaultView="desktops" /><appShortcuts enabled="false" allowSessionReconnect="false" /></userInterface></clientSettings>',"text/xml");CTXS.Config.parseConfig("",xml);CTXS.Localization.init();if(window.location.search=="?standalonelogin"||(window.location.search!="?standalone"&&CTXS.sharedUserMode())){var c;var b='<h1 class="messagebox-title">Citrix Receiver</h1>';c='<a href="#" class="custombutton">'+$.localization.string("LogOn")+"</a>";c='<div class="messagebox-buttons">'+c+"</div>";b+=c;var a=CTXS.displayMessagePane(b);var d=CTXS.button(a.find(".custombutton"));d.click(function(){CTXS.trigger("Shared_User_Mode_Logon")}).ctxsHandleEscapeKeyInDialog().ctxsPlaceFocusOnFirstElement().ctxsBindFocusWithin()}else{if(window.location.search=="?standalone"){CTXS.getResources=function(){return{categories:[],resources:[{clienttypes:["ica30"],description:"",iconurl:"",id:"example1",launchurl:"",name:"Example 1",path:"\\Example\\",position:"",shortcutvalidationurl:"",subscriptionstatus:"subscribed",subscriptionurl:""}],subscriptionsEnabled:true,username:null}}}CTXS.Resources.renderResources("",CTXS.getResources());$("div.usermenu-body").prepend('<a href="#" id="usermenu-trigger-about" class="_ctxstxt_About" role="menuitem"></a>').find("#usermenu-trigger-about").click(function(){CTXS.trigger("AboutBox")});$("div.usermenu-body").prepend('<a href="#" id="usermenu-trigger-connectioncenter" class="_ctxstxt_ConnCenter" role="menuitem"></a>').find("#usermenu-trigger-connectioncenter").click(function(){CTXS.trigger("ConnectionCenter")});$("div.usermenu-body").prepend('<a href="#" id="usermenu-trigger-preferences" class="_ctxstxt_Preferences" role="menuitem"></a>').find("#usermenu-trigger-preferences").click(function(){CTXS.trigger("Preferences")});if(window.location.search=="?standalone"){CTXS.populateAccounts=function(){return""}}stores_menu_focus_cb=function(){window.setTimeout(function(){var e=$(":focus");if(!e.hasClass("storemenu")&&e.attr("id")!="usermenu-trigger-accounts"){$(".usermenu-body-stores").hide()}},100)};if(CTXS.populateAccounts()!=""){if(CTXS.getResources().resources.length>0){cssString="left"}else{cssString="right"}$("div.usermenu-body").prepend('<a href="#" id="usermenu-trigger-accounts" class="_ctxstxt_Accounts" role="menuitem"></a>').find("#usermenu-trigger-accounts").focusin(function(){$("div.usermenu-body-stores").css(cssString,$("div.usermenu-body").width()+2).show()}).focusout(stores_menu_focus_cb);$("div.usermenu-body").prepend('<div id="usermenu-body-stores" class="usermenu-body-stores"></div>');$("div.usermenu-body-stores").append(CTXS.populateAccounts()).focusout(stores_menu_focus_cb).children().click(function(){CTXS.trigger(this.id)})}$("div.usermenu-body").prepend('<a href="#" id="usermenu-trigger-refresh" class="_ctxstxt_RefreshApps" role="menuitem"></a>').find("#usermenu-trigger-refresh").click(function(){CTXS.trigger("Refresh")});if(window.location.search!="?standalone"){CTXS.selfSelection()}}});